name: Vale linter

# run this workflow only
on:
  pull_request:
    branches:
      - vale_linter

jobs:
  vale:
    name: runner / vale
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # OR "2" -> To retrieve the preceding commit.

      - name: Get changed files
        id: changed-files
        uses: tj-actions/changed-files@v29.0.3

      - uses: actions/checkout@v2
      - uses: errata-ai/vale-action@reviewdog
        env:
          # Required, set by GitHub actions automatically:
          # https://docs.github.com/en/actions/security-guides/automatic-token-authentication#about-the-github_token-secret
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
        with:
          # The Vale CLI version to install.
          # version: # optional, default is latest
          # The files to lint: "all" or "<some_folder>".
          files: '${{steps.changed-files.outputs.all_changed_files}}'
          # Log debugging information to stdout.
          # debug: # optional, default is false
          # Reporter of reviewdog command [github-pr-check,github-pr-review,github-check].
          reporter: github-pr-review # optional, default is github-pr-check
          # Exit code for reviewdog when errors are found [true,false]
          # Default is `false`.

          # fail_on_error: # optional, default is false
          # Report level for reviewdog [info,warning,error].
          # level: # optional, default is error
          # Filtering for the reviewdog command [added,diff_context,file,nofilter].
          # Default is added.

          # filter_mode: # optional, default is added
          # Space-delimited list of flags for the Vale CLI.
          # vale_flags: # optional, default is 
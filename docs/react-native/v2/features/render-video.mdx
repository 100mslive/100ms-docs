---
title: Render Video
nav: 3.6
---
It all comes down to this. All the setup so far has been done so that we can show live streaming video in our beautiful apps.

The React Native SDK provides a Component `HmsView` that renders the video on the screen. You can access `HmsView` on the `HMSSDK` instance that you created with build method.

We can pass `scaleType`, `mirror` and video tracks' `trackId` to `HmsView` component.

```js
import { HMSVideoViewMode } from '@100mslive/react-native-hms';
...
const styles = StyleSheet.create({
  hmsView: {
    height: '100%',
    width: '100%',
  },
});

// hms instance acquired from build method
const HmsView = hmsInstance.HmsView;

<HmsView
  key={trackId}
  trackId={trackId}
  mirror={true}
  scaleType={HMSVideoViewMode.ASPECT_FILL}
  style={styles.hmsView}
/>
...
```

> Note: One `HmsView` component can only be connected with one video `trackId`. To display multiple videos you have to create multiple instances of `HmsView` component.

- Once the requirement of that `HmsView` is finshed it should be disposed.

- Every `HmsView` should be unique, which should be done by passing a `key` property and value as video `trackId`.

- Recommended practice is to show maximum of 3 to 4 `HmsView` on a single page/screen of the app. This avoids network data consumption & video decoding resources of the device.  

- For listening to the audio you have to do absolutely nothing, it's automatically played once you join the room. To mute & unmute audio/ideo refer [here](./mute). To set volume levels refer [here](../advanced-features/set-volume).


## Track Id

It is a required prop in the `HmsView` component. You can get trackIds of peers from `HMSUpdateListenerActions.ON_TRACK_UPDATE` event.

```js
const onTrackListener = (data: { peer: HMSPeer; track: HMSTrack; type: HMSTrackUpdate }) => {
  const { peer, track, type } = data;

  // We will only consider Video tracks events to render videos
  if (track.type === HMSTrackType.VIDEO) {

    // If Video track is added, you can use `trackId` to render video
    if (type === HMSTrackUpdate.TRACK_ADDED) {
      console.log(`${peer.name}s' video track Added: ${track.trackId}`);
      console.log(`Render HMSView with trackId: ${track.trackId}`);
    }

    // If Video track is removed, remove `HMSView` which is using this `trackId`
    if (type === HMSTrackUpdate.TRACK_REMOVED) {
      console.log(`${peer.name}s' video track Removed: ${track.trackId}`);
      console.log(`Remove HMSView rendering trackId: ${track.trackId}`);
    }

    if (
      type === HMSTrackUpdate.TRACK_MUTED ||
      type === HMSTrackUpdate.TRACK_UNMUTED ||
      type === HMSTrackUpdate.TRACK_RESTORED ||
      type === HMSTrackUpdate.TRACK_DEGRADED
    ) {
      console.log(
        `Update UI to show Muted/Unmuted/Degraded/Restored updates: ${track.trackId}`
      );
    }
  }
};

hmsInstance.addEventListener(
  HMSUpdateListenerActions.ON_TRACK_UPDATE,
  onTrackListener
);
```

Make sure the trackId passed in the HMSView is not null/undefined because once a trackId is linked to HMSView, it can not be unlinked. 

**You can make sure the `trackId` is not null/undefined by listening to `ON_TRACK_UPDATE` event for track updates. When you receive `TRACK_ADDED` update type for "Video" track, you will have `track` object with valid `trackId` for each `peer`.**

> Refer to [peerId undefined issue](https://www.100ms.live/docs/react-native/v2/guides/faq#track-id-is-undefined-hms-view-is-rendering-blank-view) for more details. You can also refer to our [sample apps](https://github.com/100mslive/react-native-hms/tree/main/sample-apps) to see our implementation.

If a null trackId is passed in HMSView you have to unmount the HMSView component and mount it with a new `trackId`.

This can be done using a `key` prop and passing `trackId` as its value in the `HmsView` component.

```js
<HmsView key={trackId} trackId={trackId} />
```

> Pro Tip: Try to render only 2 to 4 videos on a screen and set sink false for other videos. This will stop downloading video data of tiles which are not visible on the screen.

## Scale Type
Scale Type prop defines how the video stream should fit the dimensions(i.e. width and height) of HMSView.

It is an optional prop in the `HmsView` component. By default value of scale type is set to `HMSVideoViewMode.ASPECT_FILL`. There are 3 scale types you can pass to render a video. 

```js
import { HMSVideoViewMode } from '@100mslive/react-native-hms';

// Video maintains the aspect ratio so it only occupies space based on the aspect ratio
const ASPECT_FILL = HMSVideoViewMode.ASPECT_FILL

// Video occupies all the available space and may get cropped 
const ASPECT_FIT = HMSVideoViewMode.ASPECT_FIT

// Video aspect ratio is balanced similar to SCALE_ASPECT_FIT
const ASPECT_BALANCED = HMSVideoViewMode.ASPECT_BALANCED
```

## Mirror
It is an optional prop in the `HmsView` component. You can mirror the videos as well. By default, the mirror prop is set to false. For a beautiful rendering, you can set mirror true for the videos rendered to the left of the camera.


## Is Degraded
Sometimes people have bad internet connections but everyone deserves a good meeting. When the network is too slow to support audio and video conversations together, the 100ms SDK can automatically turn off downloading other peers' videos, which may improve the audio quality and avoid disconnections. 

If the network quality improves, the videos will be restored automatically as well.

Show a black tile with avatar or initials when `isDegraded` is true.
```js
const isDegraded: boolean = peer.videoTrack.isDegraded
```


## Receive Local and Remote Peers updates

Always use `ON_PEER_UPDATE` and `ON_TRACK_UPDATE` listeners, these listeners get updated `localPeer` and `remotePeers` whenever there is any event related to these values.

```js
// In this example code snippet, We are keeping things very simple.
// You will get an overview of how to render `HMSView`s for list of `trackId`s and how to keep that list up to date.
// We don't need `ON_PEER_UPDATE` event listener for keeping track of only `trackId`s.
// So, we have registered only `ON_TRACK_UPDATE` event listener here

const [trackIds, setTrackIds] = useState<string[]>([]);

const onTrackListener = (data: { peer: HMSPeer; track: HMSTrack; type: HMSTrackUpdate }) => {
  // We will only consider Video tracks for this example
  if (data.track.type !== HMSTrackType.VIDEO) return;

  // If Video track is added, add trackId to our list
  if (data.type === HMSTrackUpdate.TRACK_ADDED) setTrackIds(prevTrackIds => [...prevTrackIds, data.track.trackId]);

  // If Video track is removed, remove trackId from our list
  if (data.type === HMSTrackUpdate.TRACK_REMOVED) setTrackIds(prevTrackIds => prevTrackIds.filter(prevTrackId => prevTrackId !== data.track.trackId));
};

hmsInstance.addEventListener(
  HMSUpdateListenerActions.ON_TRACK_UPDATE,
  onTrackListener
);

// Render multiple HMSView for trackIds inside FlatList
// Note: HMSView will render blank if video track of peer is muted, Make sure video of peers is not muted.
<FlatList
  data={trackIds} // trackIds is an array of trackIds of video tracks
  keyExtractor={(trackId) => trackId}
  renderItem={({ item }) => <HMSView key={item} trackId={item} style={{ width: '100%', height: 300 }} {...} />}
  {...}
/>
```

To see a more detailed implementation of these events, you can refer our [quickstart app implementation](https://github.com/100mslive/react-native-hms/blob/21d7871691ec6c8ffd125a0592a3b16c5e79e1cd/sample-apps/rn-quickstart-app/src/screens/MeetingScreen/hooks.ts#L158)

In above example, We haven't considered showing Avatars, Muted Status, Name of Peers because we wanted this example to be simple.
To show all these visual elements you need to have `peer` object and `track` object for that peer. You can use `PeerTrackNode` interface mentioned in below code snippet for this use case -

```js
interface PeerTrackNode {
  id: string;
  peer: HMSPeer;
  track: HMSTrack;
  isDegraded: boolean;
}
```

Then, You can use list of `PeerTrackNode` instead of trackIds in `FlatList`.

We have used `PeerTrackNode` object type in our [Quickstart Sample app](https://github.com/100mslive/react-native-hms/tree/develop/sample-apps/) and [Example app](https://github.com/100mslive/react-native-hms/tree/main/example). You should definitely see implementation in our apps and to read more, refer [here](https://github.com/100mslive/react-native-hms/tree/main/example#peertracknodes).

## Troubleshooting in HmsView

If a video renders for the first time and then it doesn't appear at all this can be due to the usage of multiple instances.

It's possible to create multiple instances of SDK which is required in some niche requirements.

In most cases, prefer to use a single instance of SDK. That means once you call the `build` method and get an hms instance, save the instance in a global state.

Do not call the `build` method again, as it will return a new hms instance every time. 

So in this way you can ensure that only a single instance of the SDK is created.

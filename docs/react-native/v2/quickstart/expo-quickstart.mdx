---
title: Expo Quickstart Guide
nav: 2.2
---

## Overview

This guide will walk you through simple instructions to create a Video Conferencing app using the 100ms React Native SDK and Expo.

| Package                     | Version                                                                                                                       |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| @100mslive/react-native-hms | [![npm](https://img.shields.io/npm/v/@100mslive/react-native-hms)](https://www.npmjs.com/package/@100mslive/react-native-hms) |

## Create a Sample app

This section contains instructions to create Expo App.

<div className="steps-container">

### Prerequisites

-   A [100ms account](https://dashboard.100ms.live/register) if you don't have one already.
-   Familiarity with [Basic concepts of 100ms](/concepts/v2/concepts/basics) like Templates, Rooms, Peers, Roles, Tracks, etc.
-   Working [Expo Local App Development Environment](https://docs.expo.dev/guides/local-app-development/#prerequisites) as we need to make changes in android and ios folders
-   Familiar with basics of [Expo](https://docs.expo.dev/tutorial/introduction/).
-   [VS code](https://code.visualstudio.com/) or any other IDE / code editor

### Create a Expo app

Once you have the prerequisites, follow the steps below to create a Expo app.

1. Open your Terminal and navigate to directory/folder where you would like to create your app.

2. Run the below command to create Expo app:

```bash section=CreateExpoApp
npx create-expo-app my-expo-app && cd my-expo-app
```

3. Install `expo-dev-client` lib, By installing this library, we will be able to install native libraries and modify project configuration

```bash section=InstallExpoDevClient
npx expo install expo-dev-client
```

4. Test run your app

<Tabs id="test-run-sample-app" items={['Android', 'iOS']} />

<Tab id="test-run-sample-app-0">

```bash section=BuildApp sectionIndex=1 tab=Android
npx expo run:android
```

The above commands compile your project, using our locally installed Android SDK, into a debug build of your app. Learn more about running android app locally [here](https://docs.expo.dev/guides/local-app-development/#local-app-compilation)

</Tab>

<Tab id="test-run-sample-app-1">

```bash section=BuildApp sectionIndex=1 tab=iOS
npx expo run:ios
```

The above commands compile your project, using our locally installed Xcode, into a debug build of your app. Learn more about running iOS app locally [here](https://docs.expo.dev/guides/local-app-development/#local-app-compilation)

</Tab>

### Install 100ms React Native SDK

[![npm](https://img.shields.io/npm/v/@100mslive/react-native-hms)](https://www.npmjs.com/package/@100mslive/react-native-hms)

After the Test run of your app is successful, you can install [100ms React Native SDK](https://www.npmjs.com/package/@100mslive/react-native-hms) package in your app.

### Refer SDK Implementation Diagram

Below is the diagram which shows the common SDK implementation lifecycle. We start with requesting the Camera & Microphone permissions from user and end with leaving the 100ms Room.

![HMSSDK Integration Lifecycle](/guides/rn-hmssdk-integration-lifecycle.png)

Now we will look at code and explaination for each step in implementation lifecycle.

### Request Camera and Microphone Permissions

We need to request camera and microphone permissions from user before initializing SDK or joining the meeting.

1. Install `expo-camera` library, It helps us to request Camera and Microphone permissions from user

```bash
npx expo install expo-camera
```

You can learn more about this library and its usage [here](https://docs.expo.dev/versions/latest/sdk/camera/)

2. Add below `expo-camera` plugin config in your expo plugin file that is root level `app.json` file

```json
[
    "expo-camera",
    {
        "cameraPermission": "This Example app uses the camera for video calls",
        "microphonePermission": "This Example app uses the microphone for audio and video calls",
        "recordAudioAndroid": true
    }
]
```

Example app.json with above config plugin changes:

```json
{
    "expo": {
        "plugins": [
            [
                "expo-camera",
                {
                    "cameraPermission": "This Example app uses the camera for video calls",
                    "microphonePermission": "This Example app uses the microphone for audio and video calls",
                    "recordAudioAndroid": true
                }
            ]
        ]
    }
}
```

3. Android platform requires some additional permissions, Add below permissions inside `android` in `app.json` config -

```json{6-12}
{
  "expo": {
    ...
    "android": {
      ...
      "permissions": [
        "android.permission.ACCESS_NETWORK_STATE",
        "android.permission.CHANGE_NETWORK_STATE",
        "android.permission.MODIFY_AUDIO_SETTINGS",
        "android.permission.BLUETOOTH",
        "android.permission.BLUETOOTH_CONNECT"
      ]
    }
    ...
  }
}
```

4. Now we can request Camera and Microphone usage permissions from user by -

```js
// Import required methods from `expo-camera` library
import {
  requestCameraPermissionsAsync,
  requestMicrophonePermissionsAsync,
} from "expo-camera";

...

// We use `requestCameraPermissionsAsync` method to request camera usage permission
const cameraPermissionResult = await requestCameraPermissionsAsync();

// We use `requestMicrophonePermissionsAsync` method to request microhone usage permission
const microphonePermissionResult = await requestMicrophonePermissionsAsync();
```

### Initialize 100ms React Native SDK

Now that we have Camera & Microphone usage permission, We can initialize 100ms React Native SDK instance using static `build` method available on `HMSSDK` class -

```js
// Import HMSSDK class
import { HMSSDK } from "@100mslive/react-native-hms";

...

// `build` method returns an instance of `HMSSDK` class
const hmsInstance = await HMSSDK.build();
```

To know more about Initializing the SDK, `HMSSDK.build` method and the arguments it accepts, refer to [HMSSDK Constructor](../how-to-guides/install-the-sdk/hmssdk) guide

### Add Event Listeners

The 100ms SDK emits events during _room joining_ and when the user _joins_ or is _in preview_. Subscribing to these events helps us understand what is happening at any given time.

We can subscribe to the events emitted by the SDK using `hmsInstance.addEventListener` method, It accepts name of the event to subscribe to (variant of `HMSUpdateListenerActions` enum) as first pameter and and callback function as second parameter.

-   The `HMSUpdateListenerActions.ON_JOIN` event is emitted when the user (you / localpeer) has successfully joined the [Room](/docs/get-started/v2/get-started/overview#rooms-and-roles).

```js
// Subscribing to ON_JOIN update
hmsInstance.addEventListener(
    HMSUpdateListenerActions.ON_JOIN, // event name
    (data) => {
        const roomObject = data.room; // room object represeting joined room
        const localPeer = data.room.localPeer; // local peer object

        // *Ques* : What to do when this event is received?
        // *Ans* : When the callback method subscribed to the `ON_JOIN` method is invoked,
        // it indicates that the current user has successfully joined the meeting/room.
        // You can now display the meeting/room UI, including video tiles of remote and local peers,
        // using the data obtained from this event and other room events.
    }
);
```

-   The `HMSUpdateListenerActions.ON_PEER_UPDATE` event is emitted when any update occurs for any _Peer_ (users in the room) in the [Room](/docs/get-started/v2/get-started/overview#rooms-and-roles), such as `HMSPeerUpdate.PEER_JOINED`, `HMSPeerUpdate.PEER_LEFT`, or `HMSPeerUpdate.NAME_CHANGED`, etc. Refer to the [HMSPeerUpdate enum](../how-to-guides/listen-to-room-updates/event-listeners-enums#hmspeerupdate) to learn about all available update types in the `ON_PEER_UPDATE` event.

```js
export enum HMSPeerUpdate {
  PEER_JOINED = 'PEER_JOINED',
  PEER_LEFT = 'PEER_LEFT',
  METADATA_CHANGED = 'METADATA_CHANGED',  // Peer metadata changed
  ROLE_CHANGED = 'ROLE_CHANGED',          // Role of Peer changed
  NAME_CHANGED = 'NAME_CHANGED',          // Name of Peer changed
  NETWORK_QUALITY_UPDATED = 'NETWORK_QUALITY_UPDATED', // Network quaity of Peer changed
  HAND_RAISED_CHANGED = 'HAND_RAISED_CHANGED', // Peer Raised Hand
}

...

// Subscribing to Peer updates
hmsInstance.addEventListener(
  HMSUpdateListenerActions.ON_PEER_UPDATE, // event name
  (data) => {
    // Updated Peer object
    const peerObject = data.peer;
    // peer update type such as `HMSPeerUpdate.PEER_JOINED`, `HMSPeerUpdate.PEER_LEFT`, etc.
    const peerUpdateType = data.type;

    // *Ques* : What to do when this event is received?
    // *Ans* : When the callback method subscribed to the `ON_PEER_UPDATE` method is invoked,
    // it indicates that there is an update on a peer in the room.
    // You can check value of `data.type` to know the exact update type.
    //
    // You can store the received `data.peer` object
    // or update the existing object of same peer (use peer.peerID for comparison)
    // in your app state to reflect the current update in UI
  },
);
```

-   The `HMSUpdateListenerActions.ON_TRACK_UPDATE` event is emitted when any update occurs for any _Track_ (audio, video, screen share) in the [Room](/docs/get-started/v2/get-started/overview#rooms-and-roles), such as `HMSTrackUpdate.TRACK_ADDED`, `HMSTrackUpdate.TRACK_REMOVED`, or `HMSTrackUpdate.TRACK_MUTED`, etc. Refer to the [HMSTrackUpdate enum](../how-to-guides/listen-to-room-updates/event-listeners-enums#hmstrackupdate) to learn about all available update types in the `ON_TRACK_UPDATE` event.

```js
export enum HMSTrackUpdate {
  TRACK_ADDED = 'TRACK_ADDED',      // new video/audio track added
  TRACK_REMOVED = 'TRACK_REMOVED',  // video/audio track removed
  TRACK_MUTED = 'TRACK_MUTED',      // video/audio track muted
  TRACK_UNMUTED = 'TRACK_UNMUTED',  // video/audio track unmuted
  TRACK_DESCRIPTION_CHANGED = 'TRACK_DESCRIPTION_CHANGED',
  TRACK_DEGRADED = 'TRACK_DEGRADED',  // video/audio track degraded due to your or remote peer's poor connection
  TRACK_RESTORED = 'TRACK_RESTORED',  // video/audio track restored which was earlier degraded
}

...

// Subscribing to Track updates
hmsInstance.addEventListener(
  HMSUpdateListenerActions.ON_TRACK_UPDATE, // event name
  (data) => {
    // Peer object whose track has an update
    const peerObject = data.peer;
    // Updated Video/Audio Track object
    const trackObject = data.track;
    // track update type such as `HMSTrackUpdate.TRACK_ADDED`, `HMSTrackUpdate.TRACK_MUTED`, etc.
    const peerUpdateType = data.type;

    // *Ques* : What to do when this event is received?
    // *Ans* : When the callback method subscribed to the `ON_TRACK_UPDATE` method is invoked,
    // it indicates that there is an update on a audio/video track in the room.
    // You can check value of `data.type` to know the exact update type.
    //
    // You can store the received `data.track` and `data.peer` object
    // or update the existing objects of same peer (use peer.peerID for comparison)
    // in your app state to reflect the current update in UI
  },
);
```

-   The `HMSUpdateListenerActions.ON_ERROR` event is emitted when SDK encounters either a critical or a standard error. Error contains a code and message due to which error occoured. Refer to [Error Handling](../how-to-guides/debugging/error-handling) guide to learn more about error handling.

```js
// Subscribing to Errors
hmsInstance.addEventListener(
    HMSUpdateListenerActions.ON_ERROR, // event name
    (error) => {
        const terminalErrorCodes = [4005, 1003, 2000, '4005', '1003', '2000'];

        const isTerminalError =
            error.isTerminal || // check is `isTerminal` property is set to `true`
            terminalErrorCodes.includes(error.code); // error code is one of above terminal codes

        // *Ques* : What to do when this event is received?
        // *Ans* : When the callback method subscribed to the `ON_ERROR` method is invoked,
        // it indicates that SDK encountered an error (HMSException)
        // this error can be terminal or normal error
        //
        // When error is terminal, you (user) should leave the room and rejoin
        // If it is normal, you can just log, alert, or show it in a toast message
        //
        // 4005, 1003, 2000 are codes for a terminal error
    }
);
```

Check the [Event Listeners](../how-to-guides/listen-to-room-updates/event-listeners) guide to learn more about the events emitted by the SDK.

### Getting Authentication Token

Authentication token is required to join a 100ms room. You can learn more about authentication tokens and room code in [Authentication and Tokens](/docs/get-started/v2/get-started/security-and-tokens) and [Auth Token Quickstart](../quickstart/token) guides.

We can get Authentication Token for joining a room by following ways -

1. **_Use room-code to generate Authentication token programmatically (Recommended)_**

You can get room-code of your room from 100ms dashboard by following [Room Code Authentication](https://www.100ms.live/docs/prebuilt/v2/prebuilt/room-codes/room-code-auth#retrieve-role-specific-room-code) guide

When you have room code, you can use `hmsInstance.getAuthTokenByRoomCode` method to generate Authentication Token for joining the room -

`hmsInstance.getAuthTokenByRoomCode` method accepts `roomCode` as first parameter, `userId` & `endpoint` as optional parameters

```js{3-4}
const roomCode = 'YOUR_ROOM_CODE'; // Room Code that you got from 100ms dashboard

// `getAuthTokenByRoomCode` returns a promise which is resolved with "auth token"
const authToken = await hmsInstance.getAuthTokenByRoomCode(roomCode);
```

You can learn more about `getAuthTokenByRoomCode` method [here](../how-to-guides/listen-to-room-updates/get-methods#getauthtokenbyroomcode)

2. **_Get temporary auth tokens from the dashboard_**

-   Navigate to your [100ms dashboard](https://dashboard.100ms.live/dashboard) or [create an account](https://dashboard.100ms.live/register) if you don't have one.
-   Use the `Video Conferencing Starter Kit` to create a room with a default template assigned to it to test this app quickly.
-   Go to the [Rooms page](https://dashboard.100ms.live/rooms) in your dashboard, click on the `Room Id` of the room you created above, and click on the `Join Room` button on the top right.
-   You will see 100ms demo URLs for the roles created when you deployed the starter kit; you can click on the 'key' icon to copy the token and update the `AUTH_TOKEN` variable in "App.js" file.
    > Token from 100ms dashboard is for testing purposes only, For production applications you must generate tokens on your own server. Refer to the [Management Token section](/concepts/v2/concepts/security-and-tokens#management-token) in Authentication and Tokens guide for more information.

<video loop="true" autoplay="autoplay" controls="controls" id="vid" muted>
    <source src="/docs/guides/update-token-react-native.mov" type="video/mp4" />
</video>
<br />

3. [Auth token server](https://www.100ms.live/docs/get-started/v2/get-started/security-and-tokens#set-up-your-token-server) - Programmatically generate auth tokens by setting up an auth token server

### Join Room

After adding event listeners to receive room updates and getting Auth Token, We can now continue to join the room using `hmsInstance.join` method.

`hmsInstance.join` method accepts `HMSConfig` object as parameter. Lets create an instance of `HMSConfig` class -

```js
// Import `HMSConfig` class
import { HMSConfig } from '@100mslive/react-native-hms';

...

const hmsConfig = new HMSConfig({
  // The Client side Authentication Token that we generated from above step, Refer {@link #getting-authentication-token}
  authToken: token,

  // The name of the current peer, which should be displayed to other peers in the room.
  username: storeState.user.userName,
});
```

Now we can use instance of `HMSConfig` class to call `hmsInstance.join` method -

```js{6}
const hmsConfig = new HMSConfig({
  authToken: token,
  username: storeState.user.userName,
});

hmsInstance.join(hmsConfig);
```

After you have called the `hmsInstance.join` method, if everything goes correctly, the SDK will emit the `HMSUpdateListenerActions.ON_JOIN` event, indicating that the join method call was successful and user has joined the room.

You can learn more about Joining the Room from [Join Room](../how-to-guides/set-up-video-conferencing/join) guide.

You can also preview your audio and video tracks before joining the room, Read [Preview](../how-to-guides/set-up-video-conferencing/preview) guide to learn about preview.

### Render Video

After joining a room, you can display the videos of peers who are publishing video.

The 100ms React Native SDK provides the `HmsView` component for rendering video tracks of peers. You can access the `HmsView` component through the `HMSSDK` class instance e.g. `hmsInstance.HmsView`.

The `HmsView` component requires the `id` of the video track to render the video. You can use the `trackId` prop on the `HmsView` component for this purpose.

> To learn how to get the `trackId` of the video track, refer to the `HMSUpdateListenerActions.ON_TRACK_UPDATE` event section in the "[Add Event Listeners](#add-event-listeners)" step above.

```js{2, 6-16}
// Getting `HmsView` component from `HMSSDK` class instance
const HmsView = hmsInstance.HmsView;

const videoTrackId = '.....'; // `trackId` of video track that we got from `HMSUpdateListenerActions.ON_TRACK_UPDATE` event

// Using `HmsView` component to render video
<HmsView

  // `trackId` of video track that we got from `HMSUpdateListenerActions.ON_TRACK_UPDATE` event
  trackId={videoTrackId}

  style={{
    width: '100%', // width of video to render
    height: '100%', // height of video to render
  }}
/>
```

You can learn more about rendering video and `HmsView` component in [Render Video Overview](../how-to-guides/set-up-video-conferencing/render-video/overview) guide.

### Mute and Unmute Tracks

You can mute and unmute audio and video tracks. Muting audio means that others cannot hear you, while muting video stops your video from being broadcast to others.

To mute and unmute, first you need to obtain the **local peer object**, which is an instance of the `HMSLocalPeer` class.

You can get the local peer object from the data received in `HMSUpdateListenerActions.ON_JOIN` event. You can also get the _updated_ local peer object by calling `hmsInstance.getLocalPeer` method -

```js
// 1. Getting local peer object in `ON_JOIN` event
hmsInstance.addEventListener(HMSUpdateListenerActions.ON_JOIN, (data) => {
    // local peer object (instance of `HMSLocalPeer` class)
    const localPeer = data.room.localPeer;
});

// ----- OR -----

// 2. Getting local peer object by calling `getLocalPeer` method
const localPeer = await hmsInstance.getLocalPeer();
```

Once you have the local peer object, You can use the `localAudioTrack` and `localVideoTrack` methods available on the local peer object to obtain instances of the `HMSLocalAudioTrack` and `HMSLocalVideoTrack` classes, respectively.

Then, You can use the `setMute` method, available on the `HMSLocalAudioTrack` and `HMSLocalVideoTrack` classes, to mute and unmute your audio and video tracks, respectively.

Example of Unmuting Audio track of local peer -

```js
// Step 1 - Getting Audio track of local peer
const localAudioTrack = localPeer.localAudioTrack();

// Step 2 - using `setMute` method on above `HMSLocalAudioTrack` to mute and unmute
if (localAudioTrack) {
    localAudioTrack.setMute(false); // use `true` to mute
}
```

Example of Unmuting Video track of local peer -

```js
// Step 1 - Getting Video track of local peer
const localVideoTrack = localPeer.localVideoTrack();

// Step 2 - using `setMute` method on above `HMSLocalVideoTrack` to mute and unmute
if (localVideoTrack) {
    localVideoTrack.setMute(false); // use `true` to mute
}
```

How to check if a track is muted or not?

You can check if a

You can learn more about

### Leave Room

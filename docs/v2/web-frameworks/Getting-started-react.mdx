---
title: Getting Started - React
nav: 14
---

## Introduction

This guide provides an overview of the key objects you'll use with 100ms' React SDK to build a live audio/video application

<Note>

If you haven't already done so, try our sample [quickstart app](https://github.com/100mslive/100ms-web-v2). Then you can come back later to see how to build your own live audio/video app in more detail

</Note>

## Supported Devices

Our alpha release has been tested on modern Chrome browsers. We will expand browser support to all modern browsers soon.

## Basic Concepts

-   `Room` - A room represents a real-time audio, video session, the basic building block of the 100ms Video SDK
-   `Track` - A track represents either the audio or video that makes up a peer's stream
-   `Peer` - A peer represents all participants connected to a room. Peers can be "local" or "remote"
-   `Broadcast` - A local peer can send any message/data to all remote peers in the room

## Pre-requisites

1. **Get the 100ms React SDK**

```bash
npm install --save @100mslive/hms-video-react@latest @100mslive/hms-video@latest
```

2. **Get Access Keys**: You can get your access keys in the [Developer](https://dashboard.100ms.live/developer) section of [100ms dashboard](https://dashboard.100ms.live)

3. **Create a room and setup a token generation service**: To create a room, follow the steps described [in this section](/v2/server-side/Create-room). To setup a token generation service, follow the steps in [this section](/v2/server-side/Generate-client-side-token). Alternatively, you can use our [quickstart server](/v2/server-side/100ms-quickstart-app-server) for this.

## Import modules & instantiate 100ms Client

100ms' React SDK provides 3 hooks

-   `useHMSActions` - provides core methods to alter the state of a room `join`, `leave` , `setScreenShareEnabled` etc.
-   `useHMStore` - provides a read-only data store to access the state-tree of the room eg. `peers` , `dominantSpeaker` etc.
-   `useHMSNotifications` - provides notifications to let you know when an event occurs eg: `PEER_JOINED, PEER_LEFT, NEW_MESSAGE, ERROR` .

If you've worked with Redux \(or any other state container\) before, actions and store should be familiar

```jsx
import { useHMSActions, useHMSStore, HMSRoomProvider } from '@100mslive/hms-video-react';

const Conference = () => {
    const hmsActions = useHMSActions();
    const hmsStore = useHMSStore(dataSelector);
    return {
        /*
            ... Conference code goes here            
            */
    };
};

const App = () => {
    return (
        <HMSRoomProvider>
            <Conference />
        </HMSRoomProvider>
    );
};
```

## Provide joining configuration and join a room

<Tabs id="join-room" items={['Joining Code', 'Full Code']} />{' '}

<Tab id='join-room-0' >

```jsx
const joinConfig = {
    userName: 'Erlich Bachmann',
    authToken: '<Auth token>', //This token should be generated from your token service
    metaData: 'custom description', //This is custom string that you can attach.
    settings: {
        isAudioMuted: false, // Join with audio muted?
        isVideoMuted: false // Join with video muted?
    }
};

hmsActions.join(joinConfig);
```

</Tab>
 
<Tab id='join-room-1'>

```jsx
import { useHMSActions, useHMSStore, HMSRoomProvider } from '@100mslive/sdk-components';

const Conference = () => {
    const hmsActions = useHMSActions();
    const hmsStore = useHMSStore();

    const joinConfig = {
        userName: 'Erlich Bachmann',
        authToken: '<Auth token>', //This token should be generated from your token service
        metaData: 'student', //Currently metadata accepts only 1 field - role.
        settings: {
            isAudioMuted: false, //Optional - Join with audio muted?
            isVideoMuted: false, //Optional - Join with video muted?
            audioInputDeviceId: 'default', //Optional
            videoInputDeviceId: 'default' //Optional
        }
    };

    useEffect(() => {
        hmsActions.join(joinConfig);
    }, [authToken]);

    return {
        /*
            Main conference code goes here
        */
    };
};

const App = () => {
    return (
        <HMSRoomProvider>
            <Conference />
        </HMSRoomProvider>
    );
};
```

</Tab>

## Get peers' states

The data store provides granular access to the room's state variables via `selectors`.  
100ms provides pre-built selectors to select most commonly used states.

<Tabs id="data-room" items={['Joining Code', 'Full Code']} />{' '}

<Tab id='data-room-0' >

```jsx
import {
    selectLocalPeer,
    selectPeers,
    selectIsLocalAudioEnabed,
    selectIsLocalVideoEnabled,
    selectIsConnectedToRoom,
    selectIsSomeoneScreenSharing,
    selectIsPeerAudioEnabled
} from '@100mslive/hms-video-react';

const localPeer = useHMSStore(selectLocalPeer);
const peers = useHMSStore(selectPeers); //Get a list of all peers - local and remote
const isLocalAudioEnabled = useHMSStore(selectIsLocalAudioEnabled); //Is the local peer muted?
const isLocalVideoEnabled = useHMSStore(selectIsLocalVideoEnabled);
const isConnected = useHMSStore(selectIsConnectedToRoom); //Is the room connected?
const isSomeoneScreenSharing = useHMSStore(selectIsSomeoneScreenSharing); //Is someone in the room screensharing?
const isPeerAudioEnabled = useHMSStore((store) => selectIsPeerAudioEnabled(store, peer.id)); //Is a remote peer muted?
```

</Tab>
<Tab id='data-room-1'>

```jsx
interface HMSStore {
    room: HMSRoom;
    peers: Record<HMSPeerID, HMSPeer>;
    speakers: Record<HMSPeerID, HMSSpeaker>;
    tracks: Record<HMSTrackID, HMSTrack>;
    messages: {
        byID: Record<HMSMessageID, HMSMessage>,
        allIDs: HMSMessageID[]
    };
    settings: HMSMediaSettings;
}

interface HMSPeer {
    id: HMSPeerID;
    name: string;
    roleName?: HMSRoleName;
    isLocal: boolean;
    isStarred?: boolean;
    videoTrack?: HMSTrackID;
    audioTrack?: HMSTrackID;
    auxiliaryTracks: HMSTrackID[];
    customerUserId?: string;
    customerDescription?: string;
}

interface HMSTrack {
    id: HMSTrackID;
    source?: HMSTrackSource;
    type: HMSTrackType;
    enabled: boolean;
    height?: number;
    width?: number;
}

export interface HMSSpeaker {
    audioLevel?: number;
}

export interface HMSMessage {
    id: HMSMessageID;
    sender: HMSPeerID;
    senderName?: string;
    time: Date;
    read: boolean;
    type: HMSMessageType;
    message: string;
}

export interface HMSMediaSettings {
    audioInputDeviceId: string;
    videoInputDeviceId: string;
    audioOutputDeviceId?: string;
    maxTileCount?: number;
}
```

</Tab>

> `selectors` are functions that accept the current data store state as an argument and return data that is derived from that state. For advanced use cases, you can write your own selector

## Render videos

To render the video of a peer, you can get the peer's video from the data store and attach it to a `video` element in which you want to render it using 100ms' `attachVideo` method

Remember to call `detachVideo` when the video is not being rendered

```jsx
import { useHMSStore, useHMSActions, selectCameraStreamByPeerID } from '@100mslive/hms-video-react';
import React, { useRef, useEffect } from 'react';

function VideoTile(props) {
    const videoRef = useRef(null);
    const hmsActions = useHMSActions();
    // Render camera track. To render screenShare track, use the selectScreenShareByPeerId selector
    const videoTrack = useHMSStore(selectCameraStreamByPeerID(props.peer.id));
    useEffect(() => {
        (async () => {
            if (videoRef.current && videoTrack) {
                if (videoTrack.enabled) {
                    await hmsActions.attachVideo(videoTrack.id, videoRef.current);
                } else {
                    await hmsActions.detachVideo(videoTrack.id, videoRef.current);
                }
            }
        })();
        //eslint-disable-next-line react-hooks/exhaustive-deps
    }, [videoTrack?.id, videoTrack?.enabled, videoTrack?.deviceID]);

    //Rendering logic
    return <video ref={videoRef} autoPlay muted></video>;
}

export default VideoTile;
```

> `selectCameraStreamByPeerID` returns the first camera track of the peer. If you have advanced, multi-camera usage - you can write your own selectors to choose multiple tracks

## Muting, unmuting

```jsx
hmsActions.setLocalVideoEnabled(false);
hmsActions.setLocalAudioEnabled(true);
```

## Adjust remote peer volume

```jsx
//mute
hmsActions.setVolume(peer.audioTrack, 0);
//unmute
hmsActions.setVolume(peer.audioTrack, 100);
// here we should probably use something between 0-100
hmsActions.setVolume(peer.audioTrack, 10);

// Get volume for audio Track
const volumeByPeerID = useHMSStore(selectAudioVolumeByPeerID(peer.id));
// Get volume for screenshare audio Track
const screenshareVolumeByPeerID = useHMSStore(selectScreenshareAudioVolumeByPeerID(peer.id));
```

## Broadcasting and receiving messages

<Note type="warning">This interface might change in an upcoming release</Note>

```jsx
import { selectHMSMessages } from '@100mslive/hms-video-react';

hmsActions.sendMessage('Hello');
const storeMessages = useHMSStore(selectHMSMessages);
```

## Notifications

<Tabs id="notif" items={['Code', 'Interface']} />

<Tab id='notif-0'  >

```jsx
import { useHMSNotifications, HMSNotificationTypes } from '@100mslive/hms-video-react';

function component() {
    const notification = useHMSNotifications();
    useEffect(() => {
        if (!notification) {
            return;
        }
        switch (notification.type) {
            case HMSNotificationTypes.PEER_JOINED:
                console.log(`${notification.data.name} joined`);
                break;
            case HMSNotificationTypes.PEER_LEFT:
                console.log(`${notification.data.name} left`);
                break;
            case HMSNotificationTypes.NEW_MESSAGE:
                console.log(
                    `${notification.data.message} received from ${notification.data.senderName}`
                );
                break;
            case HMSNotificationTypes.ERROR:
                console.log('[Error]', notification.data);
                break;
            case HMSNotificationTypes.RECONNECTED:
                console.log('[Reconnected]');
                break;
            case HMSNotificationTypes.RECONNECTING:
                console.log('[Reconnecting]', notification.data);
                break;
            default:
                break;
        }
    }, [notification]);
}
```

</Tab>

<Tab id='notif-1' >

For Error Codes [See Documentation](/v2/error-codes/error-codes-and-description)

```typescript
interface HMSNotification {
    id: number;
    type: string;
    message: string;
    data: any;
    severity?: 'info' | 'error' | 'critical';
}

class HMSNotificationTypes {
    static PEER_JOINED = 'PEER_JOINED';
    static PEER_LEFT = 'PEER_LEFT';
    static NEW_MESSAGE = 'NEW_MESSAGE';
    static ERROR = 'ERROR';
}

// this will be the format of notification.data in ERROR cases
interface HMSException {
    name: string;
    message: string;
    description: string;
    readonly code: number;
}
```

</Tab>

## Share screen

```jsx
hmsActions.setScreenShareEnabled(true);
```

## Leave room

```jsx
hmsActions.leave();
```

## Managing roles

Read about roles in the JavaScript section of the [documentation](../client-sdks/Getting-Started-Javascript#managing-roles)

### Changing roles mid-call

Changing a role involves selecting a remote peer and the name of the new role. You can get a list of the remote peers using the `selectRemotePeers` selector and the list of available roles using `selectAvailableRoleNames` selector.
Refer to the Reactive Store [documentation](../client-sdks/Reactive-Store-Extension-to-the-JS-SDK#fetching-role-related-information) for more information about selectors.

```jsx
import { selectAvailableRoleNames, useHMSStore, useHMSActions } from '@100mslive/hms-video-store';

function RemotePeer({ peer }) {
    const roleNames = hmsStore.getState(selectAvailableRoleNames);
    const [newRole, setNewRole] = React.useState(peer.roleName);
    const [force, setForce] = React.useState(false);

    const handleClick = () => {
        hmsActions.changeRole(peer.id, newRole, force);
    };

    const handleSelectInput = (event) => {
        setNewRole(event.target.value);
    };

    return (
        <>
            <VideoTile peer={peer} />
            <select value={newRole} onChange={handleSelectInput}>
                {roleNames.map((roleName) => (
                    <option key={roleName} value={roleName}>
                        {roleName}
                    </option>
                ))}
            </select>
            <button onClick={handleClick}>Change role</button>
        </>
    );
}
```

### Showing a dialog on incoming role change requests

If a user receives a role-change request from another peer, you can fetch that request using `selectRoleChangeRequest` selector and show it to the user.

> **Note**: In case of a forced role-change the user will not receive a request.

<Tabs id="role-change" items={['Code', 'Interface']} />

<Tab id="role-change-0">

```jsx
import { selectRoleChangeRequest, useHMSStore } from '@100mslive/hms-video-store';

function Conference() {
    const roleChangeRequest = useHMSStore(selectRoleChangeRequest);
    // ...
    return (
        <>
            <Room />
            {roleChangeRequest && (
                <Dialog>
                    <p>
                        {roleChangeRequest.peer.name} has requested a role change to{' '}
                        {roleChangeRequest.role.name}.
                    </p>
                </Dialog>
            )}
        </>
    );
}
```

</Tab>

<Tab id="role-change-1">

```jsx
interface HMSRoleChangeRequest {
    requestedBy: HMSPeer;
    role: HMSRole;
    token: string;
}
```

</Tab>

> Refer to the JavaScript [documentation](../client-sdks/Getting-Started-Javascript#changing-roles-mid-call) for more information about the `HMSRole` interface

### Accepting or rejecting a role change request

In case of a non-forced role change, the user will have the option to either accept or reject the role change.

```jsx
hmsActions.acceptChangeRole(roleChangeRequest);
// or
hmsActions.rejectChangeRole(roleChangeRequest);
```

Either of those actions will set the `roleChangeRequest` to `null` and will result in the dismissal of the `Dialog` in the previous code example.

## Advanced use cases

### Adding / removing auxiliary tracks

To add an auxiliary track\(canvas capture, electron screen-share, etc...\), you can use the addTrack method provided by the SDK. This method adds the track to the local peer's list of auxiliary tracks and publishes it to make it available to remote peers.

```jsx
/**
 * track: MediaStreamTrack - Track to be added
 * source: 'regular' | 'screen' | 'plugin' - Source of track - default: 'regular'
 */
await hmsActions.addTrack(track, source);
```

To remove an auxiliary track, you can use the removeTrack method provided by the SDK. This method removes the track from the local peer's list of auxiliary tracks and unpublishes it.

```jsx
// trackId: ID of the track to be removed
await hmsActions.removeTrack(trackId);
```

> `removeTrack` removes the track only from the list of auxiliary tracks of the local peer. It doesn't remove/unpublish the `audioTrack`/ `videoTrack` of the local peer.

### Audio Output Management

Change the audio output device and volume using `hmsActions.setAudioOutputDevice("a-valid-MediaDeviceInfo-object-id")` and `hmsActions.setVolume(30)`.

```js
  /**
   * Set the output volume of audio tracks(overall/particular audio track)
   * @param value number between 0-100
   * @param trackId string If undefined sets the overall volume(of every audio track in the room); If valid - set the volume of particular audio track
   *
   */
  setVolume(value: number, trackId?: string): void;
  /**
   * Set the audio output(speaker) device
   * @param deviceId string deviceId of the audio output device
   */
  setAudioOutputDevice(deviceId: string): void;
```

### Showing a preview screen before joining

<Tabs id="preview" items={['Code', 'Interface']} />

<Tab id="preview-0">

```jsx
import { HMSConfig } from '@100mslive/hms-video';
import {
    useHMSStore,
    selectLocalPeer,
    useHMSActions,
    selectIsLocalAudioEnabed,
    selectIsLocalVideoEnabled
} from '100mslive/hms-video-store';

function Preview(props) {
    const config: HMSConfig = props.config;
    const localPeer = useHMSStore(selectLocalPeer);
    const hmsActions = useHMSActions();

    const isLocalAudioEnabled = useHMSStore(selectIsLocalAudioEnabled);
    const isLocalVideoEnabled = useHMSStore(selectIsLocalVideoEnabled);

    const videoElementRef = React.useRef(null);

    React.useEffect(() => {
        /**
         * config contains the userName and the authToken for the room
         * Refer the interface for more information
         */
        hmsActions.preview(config);
    }, [config, hmsActions]);

    React.useEffect(() => {
        if (localPeer?.videoTrack && videoElementRef.current) {
            hmsActions.attachVideo(localPeer.videoTrack, videoElementRef.current);
        }
    }, [localPeer?.videoTrack, hmsActions]);

    return localPeer?.videoTrack ? (
        <video ref={videoElementRef} autoPlay muted />
    ) : (
        <div>Loading...</div>
    );
}
```

</Tab>

<Tab id="preview-1">

```jsx
interface HMSConfig {
    userName: string;
    authToken: string;
    metaData?: string;
    audioSinkElementId?: string;
    initEndpoint?: string;
    settings?: InitialSettings;
    autoVideoSubscribe?: boolean;
}

interface InitialSettings {
    isAudioMuted: boolean;
    isVideoMuted: boolean;
    audioInputDeviceId: string;
    audioOutputDeviceId: string;
    videoDeviceId: string;
}
```

</Tab>

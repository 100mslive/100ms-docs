---
title: Getting Started - Virtual Background
nav: 12
---

## Introduction

Virtual Backgrounds are fairly use in Video Conferencing space. It will give user the flexibility to
insert custom backgrounds or blurring.
This guide provides an overview of virtual background plugin usage with 100ms

## Supported Devices

Our current plugin version supports Chrome, Firefox, edge browser and M-Web

For an enhanced Virtual Background Plugin performance enable simd in browser

-  `Chrome` -> Open chrome://flags/ in browser, search for simd, enable WebAssembly SIMD support and Restart
-  `Firefox`-> Open about:config in browser, search for simd, Set javascript.options.wasm_simd=true and Restart

## Usage

### Installation

```bash
npm install @100mslive/hms-virtual-background
```

### Add and Remove Plugin

<Tabs id="plugin-code" items={['Store', 'Sdk', 'React']} />

<Tab id='plugin-code-0'>

```javascript
import {hmsActions, hmsStore} from "@100mslive/hms-video-store";
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"

//Initialize Plugin
// background : {'blur' | 'imgSource' | 'None'}
     //  'blur'     -> Set background to blur
     // 'imgSource' -> image URL or base64, Set Background to image source
     //  'None'     -> Set to None/default background
virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'None'|imgSource})

// Add Plugin: This will Apply the Virtual Background effect to the local video
hmsActions.addPluginToVideoTrack(virtualBackground);

//Remove Plugin: This will remove the Virtual Background effect from the local Video
hmsActions.removePluginFromVideoTrack(virtualBackground);

//Selector to know the current plugins and if Virtual Background is part of it
const videoTrack = hmsStore.getState(selectLocalVideoTrack)
const plugins =  videoTrack.getPlugins();
const isVBApplied = plugins.includes(virtualBackground.getName())
if(isVBApplied){
    console.log("Virtual Background effect is Applied to the local Video")
}else{
    console.log("Virtual Background effect is removed from the local Video")
}

```
</Tab>

<Tab id='plugin-code-1'>

```javascript
import {HMSSdk} from "@100mslive/hms-video";
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"

//Initialize Plugin
// background : {'blur' | 'imgSource' | 'None'}
     //  'blur'     -> Set background to blur
     // 'imgSource' -> image URL or base64, Set Background to image source
     //  'None'     -> Set to None/default background
virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'None'|imgSource})

// Add Plugin: This will Apply the Virtual Background effect to the local video
hms.getLocalPeer().videoTrack?.addPlugin(virtualBackground);

//Remove Plugin: This will remove the Virtual Background effect from the local Video
hms.getLocalPeer().videoTrack?.removePlugin(virtualBackground);

//Selector to know the current plugins and if Virtual Background is part of it
const videoTrack = hms.getLocalPeer().videoTrack?
const plugins =  videoTrack?.getPlugins();
const isVBApplied = plugins.includes(virtualBackground.getName())
if(isVBApplied){
    console.log("Virtual Background effect is Applied to the local Video")
}else{
    console.log("Virtual Background effect is removed from the local Video")
}
```
</Tab>

<Tab id='plugin-code-2'>

```javascript
import {useHMSStore, useHMSActions} from '@100mslive/hms-video-react';
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"
import React, { useRef, useEffect } from 'react';

function VirtualBackground(props) {
     const videoRef = useRef(null);
     const hmsActions = useHMSActions();
     const videoTrack = useHMSStore(selectCameraStreamByPeerID(props.peer.id));

     //Initialize Plugin
     // background : {'blur' | 'imgSource' | 'None'}
          //  'blur'     -> Set background to blur
          // 'imgSource' -> image URL or base64, Set Background to image source
          //  'None'     -> Set to None/default background
     virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'None'|imgSource})

     useEffect(() => {
      (async () => {
       if (videoRef.current && videoTrack) {
         if (videoTrack.enabled) {
           await hmsActions.addPluginToVideoTrack(virtualBackground);
         } else {
           await hmsActions.removePluginFromVideoTrack(virtualBackground);
         }
       }
      })();
     //eslint-disable-next-line react-hooks/exhaustive-deps
     }, [videoTrack?.id, videoTrack?.enabled, videoTrack?.deviceID, videoTrack?.plugins]);

     //Rendering logic
     return <video ref={videoRef} autoPlay muted></video>;
}

export default VirtualBackground;

```
</Tab>


## Advance Methods

### Change Background

Call setBackground from the plugin to Update the Background Again Later if required
It accepts string as a parameter

```jsx
// background: same as above
virtualBackgroundPlugin.setBackground(background: string);
```



### Optional

Init can be used to show a loader Icon for background selector component during the Plugin Loading stage
if init hasn't be already called, the first background change will take a perceivable amount of time.

```jsx
//ex:- virtualBackgroundPlugin.init().then(() => console.log("background can be changed now"))
virtualBackgroundPlugin.init();
```
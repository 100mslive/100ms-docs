---
title: Getting Started - Virtual Background
nav: 12
---

## Introduction

Virtual Backgrounds are fairly use in video conferencing space. It will give user the flexibility to
insert custom backgrounds or blurring.
This guide provides an overview of virtual background plugin usage with 100ms


<Image width={640} height={480} alt="VirtualBackground" src="/docs/v2/sample2-vb.png" />

## Usage

### Installation

```bash
npm install @100mslive/hms-virtual-background
```

### Add and Remove Plugin

<Tabs id="plugin-code" items={['Store', 'React', 'Sdk']} />

<Tab id='plugin-code-0'>

```javascript
//Import modules and plugin
import {hmsActions, hmsStore} from "./hms";
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"
```

```javascript
// Create plugin
// background : {'blur' | 'imgSource' | 'None'}
     //  'blur'     -> Set background to blur
     // 'imgSource' -> base64 or HTMLImageElement, set background to imgSource
     //  'none'     -> Set to none/default background
const virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'none'|imgSource})
```
```javascript
// This will apply the virtual background effect to the local video
hmsActions.addPluginToVideoTrack(virtualBackground);
```

```javascript
//This will remove the virtual background effect from the local video
hmsActions.removePluginFromVideoTrack(virtualBackground);
```

```javascript
//Selector to know the current plugins and if Virtual Background is part of it
const videoTrack = hmsStore.getState(selectLocalVideoTrackID)
const plugins =  videoTrack.plugins;
const isVBApplied = plugins.includes(virtualBackground.getName())
if(isVBApplied){
    console.log("virtual background effect is applied to the local video")
}else{
    console.log("virtual background effect is removed from the local video")
}
```
</Tab>

<Tab id='plugin-code-1'>

```javascript
//Import modules and plugin
import {useHMSStore, useHMSActions} from '@100mslive/hms-video-react';
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"
import React, { useRef, useEffect } from 'react';
```

```javascript
// Create plugin
// background : {'blur' | 'imgSource' | 'None'}
     //  'blur'     -> Set background to blur
     // 'imgSource' -> base64 or HTMLImageElement, set background to imgSource
     //  'None'     -> Set to None/default background
const virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'none'|imgSource})
```

```javascript
function VirtualBackground() {
     const hmsActions = useHMSActions();
     const [showBackground, setShowBackground] = useState(false);

     useEffect(() => {
       if (showBackground) {
           await hmsActions.addPluginToVideoTrack(virtualBackground);
         } else {
           await hmsActions.removePluginFromVideoTrack(virtualBackground);
         }
       },[showBackground, hmsActions]);

     return(<Button onClick={() => setShowBackground(!showBackground)}/>)
}
export default VirtualBackground;
```
</Tab>

<Tab id='plugin-code-2'>

```javascript
//Import plugin
import HMSVirtualBackgroundPlugin from "@100mslive/hms-virtual-background"
```
```javascript
// Create plugin
// background : {'blur' | 'imgSource' | 'None'}
     //  'blur'     -> Set background to blur
     // 'imgSource' -> base64 or HTMLImageElement, set background to imgSource
     //  'None'     -> Set to None/default background
const virtualBackground = new HMSVirtualBackgroundPlugin({background: 'blur'|'none'|imgSource})
```

```javascript
// This will apply the virtual background effect to the local video
hms.getLocalPeer().videoTrack?.addPlugin(virtualBackground);
```

```javascript
// This will remove the virtual background effect from the local video
hms.getLocalPeer().videoTrack?.removePlugin(virtualBackground);
```

```javascript
//To know the current plugins and if virtual background is part of it
const videoTrack = hms.getLocalPeer().videoTrack
const plugins =  videoTrack?.getPlugins();
const isVBApplied = plugins.includes(virtualBackground.getName())
if(isVBApplied){
    console.log("virtual background effect is applied to the local video")
}else{
    console.log("virtual background effect is removed from the local video")
}
```
</Tab>

## Advance Methods

### Change Background

Call setBackground from the plugin to update the background again later if required
It accepts string|HTMLImageElement as a parameter

Image will get fit to the video by maintaining the aspect ratio.
Input aspect ratio of the background image is preferred else we are cropping the image to fit in background

```jsx
// background: same as above
virtualBackground.setBackground(background: string|HTMLImageElement);
```

### Init(Optional)

Init can be used to show a loader icon for background selector component during the plugin loading stage
if init hasn't be already called, the first background change will take a perceivable amount of time.

```jsx
//ex:- virtualBackground.init().then(() => console.log("background can be changed now"))
virtualBackground.init();
```

## Supported Devices

Our current plugin version supports chrome, firefox and edge browsers
isSupported Api can be used to check if the browser is supported or not
It will return True/False based on browser.

```jsx
if(virtualBackground.isSupported()){
    console.log("Platform is supported");
}else{
    console.log("Platform not supported")
}
```

## Tips For Better User Experience

For an enhanced virtual background plugin performance enable simd in browser

-  `Chrome` -> Open chrome://flags/ in browser, search for simd, enable WebAssembly SIMD support and restart
-  `Firefox`-> Open about:config in browser, search for simd, set javascript.options.wasm_simd=true and restart
---
title: Short Guide - Android
nav: 10
---

## Overview

In this overview the major steps involved in creating a demo project with the 100ms SDK will be laid out. Each section will be explained in more detail further ahead.

Jump to a section you're interested in or read top down to get the overview.

- [Getting the video call joining link](#getting-the-video-call-joining-link)
- [How to render audio/video](#how-to-get-audio-and-video)
- [From adding SDK dependencies to joining calls](#from-adding-sdk-depdency-to-joining-calls)
- [Know when people join or leave](#how-you-know-when-people-join-or-leave)
<hr/>

### Getting the video call joining link

The [100ms Dashboard](https://dashboard.100ms.live/register) is how you can quickly try out creating a video conferencing call link and joining it. For production use cases your own server will generate the joining links and manage user authentication.

Direct use of the dashboard will stop working after 10k minutes of video calls and you'll need to setup your own server after.

For the purposes of this quickstart you can rely on just the 100ms dashboard without a separate server. Sign up for the 100ms Dashboard [here](https://dashboard.100ms.live/register).

From either the dashboard, or your own server once implemented, you need to generate a video call link. The ones generated by the 100ms Dashboard look like `https://myname.app.100ms.live/meeting/correct-horse-battery`.

> ⚙️ For Production
>
>  When you choose to make your own server for authentication and link generation, the format of the link is entirely up to you.

### From adding sdk depdency to joining calls
On the Android app (click the arrow to expand for details):
1. [Add the sdk dependencies](#add-sdk-dependencies)
2. [Create a login token to authenticate the user](#login).
3. [Create an instance of the `HMSSDK`](#instantiate-hmssdk).
    * Show an optional of the user's audio video with the 100ms `hmssdk.preview`.
4. [Call `hmssdk.join` with the video call link to join the call](#join-a-video-call).


#### Add SDK dependencies

- Add the JitPack repository to your root `settings.gradle` at the end of the `respositories` closure:

You can open it easily in Android Studio by double tapping shift and typing `settings.gradle`.

```json{7}:settings.gradle
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
        jcenter() // Warning: this repository is going to shut down soon
        maven { url 'https://jitpack.io' }
    }
}
rootProject.name = "MyVideoCallApp"
include ':app'

```

- Add the 100ms sdk dependency to your app-level `build.gradle` [![](https://jitpack.io/v/100mslive/android-sdk.svg)](https://jitpack.io/#100mslive/android-sdk)

You'll also need the webrtc dependency for the `org.webrtc.SurfaceViewRenderer` that's required to display people's videos.

```json
dependencies {
        // See the version in the jitpack badge above.
		implementation 'com.github.100mslive:android-sdk:x.x.x' 
        implementation 'org.webrtc:google-webrtc:1.0.32006'
	}
```


### How to get audio and video
The audio for every person who joins the call is played by the SDK automatically when you have joined.

To see the person's video you need to create an instance of `org.webrtc.SurfaceViewRenderer` which can be taken from the library `implementation 'org.webrtc:google-webrtc:1.0.32006'`.


### How you know when people join or leave

The join method takes an interface called `HMSUpdateListener` which lets you know when peers join and leave the call, mute/unmute their audio and video and lots more.

The `HMSUpdateListener` has a callback which will be called when people join or leave `onPeerUpdate(type: HMSPeerUpdate, peer: HMSPeer)`. `HMSPeer` is object that represents a person in the call.


Here's the [server](todo add link) way and below is how you can login relying on the 100ms auth.

## Login

### Request

Here's how to get an auth token with 100ms's demo authentication
1. Sign up to the dashboard.
2. Get your video call link should look like `https://myname.app.100ms.live/meeting/correct-horse-battery`
3. Send an http post request to `https://prod-in.100ms.live/hmsapi/get-token`
4. With the header "subdomain" set to myname.app.100ms.live if your link was `https://myname.app.100ms.live/meeting/correct-horse-battery`
5. For a link of the type `https://myname.app.100ms.live/meeting/correct-horse-battery` The body is json with the format `{"code": "correct-horse-battery", "user_id":"your-customer-id" }` the user_id can be any random string as well and you can create it with `UUID.randomUUID().toString(),`.

### Response

The 100ms server will respond with an auth token in the following json response format `{"token":"some-token-string"}`.

## Instantiate HMSSDK

The HMSSdk can be instantiated like so:
<Tabs id="instanstiate-hmssdk" items={['Kotlin', 'Java']} />

<Tab id='instanstiate-hmssdk-0'>

```kotlin
    val hmsSdk = HMSSDK
        .Builder(application)
        .build()
```
</Tab>

<Tab id='instanstiate-hmssdk-1'>

```java
    HMSSDK hmssdk = new HMSSDK
                        .Builder(application)
                        .build();
```
</Tab>


## Get a Preview (optional)

TODO

## Join a Video Call

To join a video call, call the `join` method of `hmssdk` with the config and appropriate listeners.

The main ones to know are:

`onJoin` - called when the join was successful and you have entered the room. Note, audio will be automatically connected, video requires some work on your side.

`onPeerUpdate` - called when a person joines or leaves the call and when their audio/video is muted/unmuted.

`onTrackUpdate` - usually when a person joins the call, the listener will first call `onPeerUpdate` for their joining and subsequently call `onTrackUpdate` with their actual video track. It's essential that this callback be listened to as well or you may have peers without video.

<Tabs id="join-call" items={['Kotlin', 'Java']} />

<Tab id='join-call-0'>

```kotlin

val config = HMSConfig("user display name", authToken)

hmsSdk.join(config, MyHmsUpdateListener())

class MyHmsUpdateListener : HMSUpdateListener { 
    override fun onJoin(room: HMSRoom) {}
    override fun onTrackUpdate(type: HMSTrackUpdate, track: HMSTrack, peer: HMSPeer) {}
    override fun onPeerUpdate(type: HMSPeerUpdate, peer: HMSPeer) {}
    override fun onMessageReceived(message: HMSMessage) {}
    override fun onRoleChangeRequest(request: HMSRoleChangeRequest) {}
    override fun onRoomUpdate(type: HMSRoomUpdate, hmsRoom: HMSRoom) {}
    override fun onError(error: HMSException) {}
}
```
</Tab>

<Tab id='join-call-1'>

```java

HMSConfig config = new HMSConfig("user display name", authToken);

hmsSdk.join(config, new MyHmsUpdateListener());

class MyHmsUpdateListener implements HMSUpdateListener {
    @Override public void onJoin(@NonNull HMSRoom hmsRoom) {}
    @Override public void onMessageReceived(@NonNull HMSMessage hmsMessage) {}
    @Override public void onPeerUpdate(@NonNull HMSPeerUpdate hmsPeerUpdate, @NonNull HMSPeer hmsPeer) {}
    @Override public void onReconnected() {}
    @Override public void onReconnecting(@NonNull HMSException e) {}
    @Override public void onRoleChangeRequest(@NonNull HMSRoleChangeRequest hmsRoleChangeRequest) {}
    @Override public void onRoomUpdate(@NonNull HMSRoomUpdate hmsRoomUpdate, @NonNull HMSRoom hmsRoom) {}
    @Override public void onTrackUpdate(@NonNull HMSTrackUpdate hmsTrackUpdate, @NonNull HMSTrack hmsTrack, @NonNull HMSPeer hmsPeer) {}
    @Override public void onError(@NonNull HMSException e) {}
}

```

</Tab>

### Showing Videos

A peer represents one person in the video call.

Thier video track can be seen in `hmsPeer.videoTrack` for the person's video and `val screenShareVideoTrack = hmsPeer.auxiliaryTracks.find { it is HMSVideoTrack }` for screenshares. i.e the auxilliary tracks is list of tracks, one of which can be a screenshare if they have chosen to share their screen.

You would want a recyclerview of participants in the video call. 

The best way to represent video call participants in an adapter for display is a class that has both the track and the peer as members. It could be called a TrackPeerPair.
See a more thourough example of this in the guide here (todo add link).

Your layout xml for a peer video would need to have an `org.webrtc.SurfaceViewRenderer` 

```xml

<org.webrtc.SurfaceViewRenderer
        android:id="@+id/videoSurfaceView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
```

This will need to be initialized when added to the window and released when it's removed, along with calling `hmsPeer.videoTrack?.addSink(surfaceViewRenderer)` to start showing videos.
See a more thourough example of this in the guide here (todo add link).

### Listening to Updates Effectively

Each time there's a an onJoin, onPeerUpdate, or onTrackUpdate, you can simply add all the peers from `hmsSdk.getPeers()` into the adapter after you put them into a TrackPeerPair.

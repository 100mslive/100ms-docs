---
title: Annotate and Share PDFs
nav: 1.23
---

You can now enable PDF annotations and sharing, allowing users to share and annotate PDFs in real-time. PDFs provide a rich immersive experience to enhance productivity during collaborative sessions.

<FlexContainer>
<Callout title="Using our Sample App?" icon="info">
If you are currently using a fork of our sample app, make sure to pull the latest changes from the main branch. PDF sharing should work out of the box and require no additional changes on your end.
</Callout>
</FlexContainer>

## Building custom UI
If you aren't using our Sample App and are building a completely custom UI, there are a few steps required to enable PDF annotations and sharing.

<StepsToc
  parentId="pdf-annotations"
  descriptions={[
    "Add UI elements to enable PDF sharing for your users and enhance collaboration.",
    "Prompt the user to select a local PDF file or provide a URL for seamless integration.",
    "Create an iframe to embed the PDF viewer within your custom UI and ensure an interactive experience.",
  ]}
/>

<StepsContainer id="pdf-annotations">

### Add UI to Enable Sharing

![Enable PDF Sharing](/docs/v2/pdf-sharing-start-sharing.png)

Add UI elements to enable PDF sharing for your users. Use role permissions to decide if you want to allow PDF sharing for users in a room. Note: PDF sharing should be disabled when there's an ongoing sharing session. You can refer to the code snippet in our repository to learn more about how we built this experience.

### Enable PDF Selection

![PDF Selection](/docs/v2/pdf-sharing-user-input.png)

Next, you need to prompt the user to provide input, either by selecting a local PDF file or providing a PDF URL. We also recommend implementing validation to handle scenarios such as:
  1. Invalid local PDF file.
  2. Invalid or non-PDF URL.

### Create an iFrame

![Embed PDF Viewer](/docs/v2/pdf-sharing-embed.png)

Finally, add an iframe element that points to the PDF viewer. You can refer to the code snippet below:

```jsx
import { useCallback, useEffect, useRef, useState } from "react";
import {
  throwErrorHandler,
  useScreenShare,
} from "@100mslive/react-sdk";
import { ThemeTypes, useTheme } from "@100mslive/react-ui";

/*
  @param pdfConfig = {
    file: // if the user selects a local file
    url: // if the user selects a PDF URL
  }
*/

export const PDFComponent = (pdfConfig) => {
  const ref = useRef();
  const themeType = useTheme().themeType;
  const [isPDFLoaded, setIsPDFLoaded] = useState(false);
  let pdfJSURL = "https://pdf-annotation.100ms.live/generic/web/viewer.html";
  const { amIScreenSharing, toggleScreenShare } =
    useScreenShare(throwErrorHandler);

  if (pdfConfig.url && !pdfConfig.file) {
    pdfJSURL = pdfJSURL + "?file=" + encodeURIComponent(pdfConfig.url);
  }
  const [wasScreenShared, setWasScreenShared] = useState(false);
  // to handle - https://github.com/facebook/react/issues/24502
  const screenShareAttemptInProgress = useRef(false);
  const iframeRef = useRef();

  const resetEmbedConfig = useCallback(() => {
    // Error handling: stop screen share and throw an error.
  }, []);

  useEffect(() => {
    if (isPDFLoaded && ref.current) {
      // Apply theme after iframe rendering.
      ref.current.contentWindow.postMessage(
        {
          theme: themeType === ThemeTypes.dark ? 2 : 1,
        },
        "*"
      );
    }
  }, [isPDFLoaded, themeType]);

  const isChrome = true; // Add a way to check if the browser is Chrome or not.

  useEffect(() => {
    if (
      !amIScreenSharing &&
      !wasScreenShared &&
      !screenShareAttemptInProgress.current
    ) {
      screenShareAttemptInProgress.current = true;
      // Start screen share on load for others in the room to see.
      toggleScreenShare({
        forceCurrentTab: isChrome,
        cropElement: iframeRef.current,
        preferCurrentTab: isChrome,
      })
        .then(() => {
          setWasScreenShared(true);
        })
        .catch(resetEmbedConfig)
        .finally(() => {
          screenShareAttemptInProgress.current = false;
        });
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  useEffect(() => {
    // Reset embed when screen share is closed from anywhere.
    if (wasScreenShared && !amIScreenSharing) {
      resetEmbedConfig();
    }
    return () => {
      // Close screen share when this component is being unmounted.
      if (wasScreenShared && amIScreenSharing) {
        resetEmbedConfig();
        toggleScreenShare(); // Stop screen share.
      }
    };
  }, [wasScreenShared, amIScreenSharing, resetEmbedConfig, toggleScreenShare]);

  return (
    <div
      ref={iframeRef}
    >
      <iframe
        src={pdfJSURL}
        title="PDF Annotator"
        ref={ref}
        style={{
          width: "100%",
          height: "100%",
          border: 0,
          borderRadius: "0.75rem",
        }}
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture fullscreen"
        referrerPolicy="no-referrer"
        onLoad={() => {
          if (ref.current && pdfConfig.file) {
            // Setting theme: dark -> 2 and light -> 1
            requestAnimationFrame(() => {
              ref.current.contentWindow.postMessage(
                {
                  file: pdfConfig.file,
                  theme: themeType === ThemeTypes.dark ? 2 : 1,
                },
                "*"
              );
              setIsPDFLoaded(true);
            }, 1000);
          }
        }}
      />
    </div>
  );
};
```
</StepsContainer>
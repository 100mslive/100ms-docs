---
title: Video KYC Integration Guide
nav: 6.1
---

# Introduction

This guide focuses on helping you integrate 100ms in your Video KYC workflow. In a video KYC workflow, a user gets on a call with an agent who is doing the verification

# Architectural Workflow

![vkyc-integration-flow](/docs/v2/vkyc-integration-doc-architecture.png)

<StepsToc
    parentId="vkyc-integration-flow"
    descriptions={[
        "Create a template.",
        "Create a room via API, join a session, token service, and implement video rendering.",
        'Implement switch camera API, capture image functionality, handle errors, and configure recording.',
        "Integrate webhooks, track network stats.",
        "Debug using 100ms' Event Inspector, conduct network throttling tests."
    ]}
/>

<StepsContainer id="vkyc-integration-flow">

### Laying the vKYC keystone

Create a template through dashboard.

```
- Roles
    - agent
        - **Publish Strategy** -
            - **Role can share:** A*udio, Video;* no *screenshare*
                
                Note: You can also keep this video off, this helps save bandwidth on the consumer’s side. The downside is the consumer doesn’t see any agent video, but only hears their audio. We recommend keeping this off.
                
            - **Video Quality:** 360p
            - **Can publish Simulcast? :** Enable
            - **Video Simulcast Layers** : 360p, 180p
        - **Subscribe Strategy -**
            - **Subscribe to :** agent, customer
        - **Permissions -**
            - Mute any peer : Enable
            - Ask any peer to unmute : Enable
            - End current session : Enable
            - Receive preview room state : Enable
            - Maximum number of peers in a room : No limit
    - customer
        - **Publish Strategy** -
            - **Role can share:** A*udio, Video;* no *screenshare*
                
                Note: You can also keep this video off, this helps save bandwidth on the consumer’s side. The downside is the consumer doesn’t see any agent video, but only hears their audio. We recommend keeping this off.
                
            - **Video Quality:** 360p
            - **Can publish Simulcast? :** Disable
        - **Subscribe Strategy -**
            - **Subscribe to :** agent, customer
        - **Permissions -**
            - Mute any peer : Enable
            - Ask any peer to unmute : Enable
            - End current session : Enable
            - Receive preview room state : Enable
            - Maximum number of peers in a room : No limit
- Recordings
    - **Storage** : Configure your cloud storage bucket
    - **Room Composite Recording** : Enable
    - **Enable auto-start on room join** : Enable
    - **SFU Recording** : Disable
- Advanced Settings
    - **Room-state** : Enable
- Additional settings to be turned on via API
    - Turn on subscribe degradation for the agent, but with the option to not turn video off. Use the [Update Template API](https://www.100ms.live/docs/server-side/v2/api-reference/policy/update-a-template). The parameter required ``"videoAlwaysEnabled": true``
```

### Getting the basics right
1. Create a [Room via API](https://www.100ms.live/docs/server-side/v2/api-reference/Rooms/create-via-api)
2. Add [Authentication and Tokens](https://www.100ms.live/docs/get-started/v2/get-started/security-and-tokens#code-sample-generate-management-token)
3.  Join a Session
    a. On [Web](https://www.100ms.live/docs/javascript/v2/how-to-guides/set-up-video-conferencing/join)
    b. On [Android](https://www.100ms.live/docs/android/v2/how-to-guides/set-up-video-conferencing/join)
4. Render the video
    a. On [Web](https://www.100ms.live/docs/javascript/v2/how-to-guides/set-up-video-conferencing/render-video/overview)
    b. On [Android](https://www.100ms.live/docs/android/v2/how-to-guides/set-up-video-conferencing/render-video/render-video)
5. End the Session - Two methods
    a. Method 1 - Leave Room
        1. Using [Web SDK](https://www.100ms.live/docs/javascript/v2/how-to-guides/set-up-video-conferencing/join#leaving-a-room)
        2. Using [Android SDK](https://www.100ms.live/docs/android/v2/how-to-guides/set-up-video-conferencing/leave)
    b. Method 2 - End Room
        1. Using [API](https://www.100ms.live/docs/server-side/v2/api-reference/active-rooms/end-active-room)
        2. Using [Web SDK](https://www.100ms.live/docs/javascript/v2/how-to-guides/control-remote-peers/end-room)
        3. Using [Android SD](https://www.100ms.live/docs/android/v2/how-to-guides/interact-with-room/room/end-room)

### Building out the workflow necessities
1. Controlling the camera
    a. For Web, implement [Switch Camera API](https://www.100ms.live/docs/javascript/v2/how-to-guides/set-up-video-conferencing/device-change#switch-camera).
    b. For Android, implement [Camera Controls API](https://www.100ms.live/docs/android/v2/how-to-guides/configure-your-device/camera/camera-controls).
    
 >   **Note**
 > 
 >   To transfer the captured images to the agent, use any upload API of your choice. Our recommendation is to **not** use 100ms’ session store or broadcast methods for this as this can be lossy.
    
2. Capture images
    a. For Web, implement [Frame Capture API](https://app.eraser.io/8b4edacb6f2c4595bc87e54554da8b43#94dd28b552b4450e93bdec664ae8f3b8).
    b. For Android, use [Camera Controls API](https://www.100ms.live/docs/android/v2/how-to-guides/configure-your-device/camera/camera-controls) to capture at the high possible resolution.
3. For error handling
    a. For Web, handle [network (disconnection, reconnection) and autoplay errors](https://www.100ms.live/docs/javascript/v2/how-to-guides/debugging/error-handling).
    b. For Android, handle [network errors](https://www.100ms.live/docs/android/v2/how-to-guides/debugging/error-handling).
4. Add [cloud storage bucket details on the 100ms Dashboard](https://www.100ms.live/docs/get-started/v2/get-started/features/recordings#configure-recording-storage-with-100ms-dashboard) in the Recordings tab of your template to store your recordings.
5. Setup and enable Room Composite Browser based recording
    a. Through [API](https://www.100ms.live/docs/server-side/v2/how-to-guides/recordings/overview) 
    b. Through [Web SDK](https://www.100ms.live/docs/javascript/v2/how-to-guides/record-and-live-stream/rtmp-recording) 
    c. Through [Android SDK](https://www.100ms.live/docs/android/v2/how-to-guides/record-and-live-stream/rtmp-recording#starting-streaming-recording)

### Setting up analytics
1. [Integrate webhooks](https://www.100ms.live/docs/server-side/v2/how-to-guides/configure-webhooks/overview) for receiving callbacks from the server (E.g. peer.leave, peer.join, beam.recording.success, etc.)
2. Listen to [100ms’ network states](https://www.100ms.live/docs/javascript/v2/how-to-guides/measure-network-quality-and-performance/connection-quality) for an overall network picture.
3. Use [stats for nerds](https://www.100ms.live/docs/javascript/v2/how-to-guides/measure-network-quality-and-performance/stats) to get more detailed stats including jitter, latency, frame drop, and more.


### Debugging and QA
1. Familiarise yourself with [events Inspector](https://dashboard.100ms.live/events-inspector) on the Dashboard to debug issues promptly.
2. Test using [network throttling](https://techjourneyman.com/blog/throttle-your-network-macos/) to check for low bandwidth conditions performanc

</StepsContainer>

# Frequently Asked Questions

- How do I implement switch/tap-to-focus/zoom camera functionality?
    
    Refer to [Building out the workflow necessities](#buildingouttheworkflownecessities) 
    
- How do I implement capture image functionality?
    
    Refer to [Building out the workflow necessities](#buildingouttheworkflownecessities) 
    
    We have a native [Frame Capture API](https://www.100ms.live/docs/javascript/v2/how-to-guides/record-and-live-stream/frame-capture) that can capture the current camera frame at 720p which should be good enough for capturing OCR details. You can also use the [Camera Controls API](https://www.100ms.live/docs/android/v2/how-to-guides/configure-your-device/camera/camera-controls) on Android.
    
 >   **Note**
 >
 >   In case you want to capture image, at a higher quality, you can use the browser’s native `getUserMedia` method to capture the image. [Codesandbox](https://codesandbox.io/s/kind-dubinsky-3h9wrg?file=/src/App.js) reference for you to check out.
    

- How do I transfer the captured image to the agent?
    
    Refer to this note in [Building out the workflow necessities](#buildingouttheworkflownecessities).
    
- How do I initiate recording?
    
    There are two ways to accomplish this.
    
    1. Recommend method: Use Room Composite Recording with or without auto-start functionality. This is a browser-based recording happening on a cloud browser. The benefits include lower A/V sync issues and faster time-to-video (p50 is 9 seconds). It does take about 2 seconds for this recording to auto-start. You can enable this through the *Recordings* tab on the dashboard. Use the [following guide](https://www.100ms.live/docs/server-side/v2/how-to-guides/recordings/overview#start-recording-with-api) to enable this.
    2. SFU Recording Method - This is done by composing the individual video tracks post-call. The benefit of using this is that it starts automatically with the room, but there can be potential A/V sync issues, and the time to get the video is longer (p50 is 1 minute 50 seconds for a 3-minute session). Enable this by [configuring the recording in the policy](https://www.100ms.live/docs/server-side/v2/api-reference/Rooms/create-via-api) itself.

- How do I track active rooms and user/customer presence in those rooms?
    - You can use our server-side [Active Rooms API](https://www.100ms.live/docs/server-side/v2/api-reference/active-rooms/overview) to track active rooms.
    - You can listen to [webhook events](https://www.100ms.live/docs/server-side/v2/how-to-guides/configure-webhooks/overview#introduction) to track peers, sessions and rooms and push subsequent updates.

- How do I receive recordings?
    
    You can listen to [webhook events](https://www.100ms.live/docs/server-side/v2/how-to-guides/configure-webhooks/webhook) for recording.
    
- How does 100ms improve disconnection rates?
    
    100ms’ SDK handles connection retries under the hood. This retry suite has been built up over browser versions, and devices, and uses a bandwidth estimation system that’s been iterated on for millions of calls. You can listen to these retries by listening to SDK [errors](https://www.100ms.live/docs/javascript/v2/how-to-guides/debugging/error-handling).
    
- How does 100ms improve a/v sync recording failures?
    
    We have Room Composite Browser-based recording which uses 100ms’ cloud browser system. Browsers natively implement A/V sync correction better than server-side systems because it is recording what it sees.
    
- How does 100ms improve permission errors?
    
    100ms’ preview API and pre-built UI have been optimized with prompts, and readable error codes with actions. Using the same preview screen can help reduce permission errors.
    
- How can I debug issues for a particular room?
    
    Use 100ms’ [event inspector](https://dashboard.100ms.live/events-inspector) to debug detailed room logs with events for join, leave, join failures, subscribe degradations etc. Refer to [Setting up analytics](https://www.notion.so/Setting-up-analytics-8bf6043696f34ddba1740fc4a0bd17f9?pvs=21) and [Debugging and QA](https://www.notion.so/Debugging-and-QA-e3894432435b4888923e8eedecd84df6?pvs=21).
    
- How can I track detailed network stats in real-time during call?
    
    You can listen to [100ms’ network states](https://www.100ms.live/docs/javascript/v2/how-to-guides/measure-network-quality-and-performance/connection-quality) for an overall network picture and [stats for nerds](https://www.100ms.live/docs/javascript/v2/how-to-guides/measure-network-quality-and-performance/stats) to get more detailed stats including jitter, latency, frame drop etc. Refer to [Setting up analytics](https://www.notion.so/Setting-up-analytics-8bf6043696f34ddba1740fc4a0bd17f9?pvs=21).


# Extra Reading Resources

- Understanding [Mental Model of 100ms SDK](https://www.100ms.live/docs/javascript/v2/quickstart/mental-model)
- [Quickstart guide on the basics of setting up video conferencing from scratch using JS on Web](https://www.100ms.live/docs/javascript/v2/how-to-guides/install-the-sdk/integration)
- [Quickstart guide on the basics of setting up video conferencing from scratch using Android](https://www.100ms.live/docs/android/v2/quickstart/quickstart)
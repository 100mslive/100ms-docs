---
title: Templates and Roles
nav: 2.2
---

<Content alias="templatesAndRoles" />

# Interact with Templates via API

Apart from dashboard, a programmatic way to interact with templates is via API. You will need a [management token](authentication-and-tokens) as bearer token for your requests. After updating a template, you might need to rejoin or initiate a new session for the template updates to take place.

<PostRequest
    title="Create Template API"
    desp="This endpoint is used to create a template. We recommend providing a list of roles with empty objects to get default values for various options correspoding to those roles, then update those roles by modifying them by `create/modify role` API."
    url="https://prod-policy.100ms.live/api/v1/templates"
/>

<Tabs items={['Request', 'Response']} id="req" />

<Tab id="req-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates -H 'Authorization: Bearer <management_token>' -X POST -H 'Content-Type: application/json' -d '{ "name": "test-template", "default": true, "roles":{ "student": {}, "teacher": {}, "admin": {} } }'
```
</Tab>
<Tab id="req-1">

<Response res="200: OK" />

```json
{
    "_id": "615e61b0ba65e77a89ba75c1",
    "name": "test-template",
    "customer": "60f7cc95f88117b9e47bf618",
    "default": true,
    "roles": {
        "admin": {
            "name": "admin",
            "publishParams": {
                "allowed": [
                    "video",
                    "screen",
                    "audio"
                ],
                "audio": {
                    "bitRate": 32,
                    "codec": "opus"
                },
                "video": {
                    "bitRate": 250,
                    "codec": "vp8",
                    "frameRate": 30,
                    "width": 480,
                    "height": 270
                },
                "screen": {
                    "codec": "vp8",
                    "frameRate": 10,
                    "width": 1920,
                    "height": 1080
                },
                "videoSimulcastLayers": {},
                "screenSimulcastLayers": {}
            },
            "subscribeParams": {
                "subscribeToRoles": [
                    "guest"
                ],
                "maxSubsBitRate": 3200,
                "subscribeDegradation": {}
            },
            "permissions": {}
        },
        "student": {
            "name": "student",
            "publishParams": {
                "allowed": [
                    "video",
                    "screen",
                    "audio"
                ],
                "audio": {
                    "bitRate": 32,
                    "codec": "opus"
                },
                "video": {
                    "bitRate": 250,
                    "codec": "vp8",
                    "frameRate": 30,
                    "width": 480,
                    "height": 270
                },
                "screen": {
                    "codec": "vp8",
                    "frameRate": 10,
                    "width": 1920,
                    "height": 1080
                },
                "videoSimulcastLayers": {},
                "screenSimulcastLayers": {}
            },
            "subscribeParams": {
                "subscribeToRoles": [
                    "guest"
                ],
                "maxSubsBitRate": 3200,
                "subscribeDegradation": {}
            },
            "permissions": {}
        },
        "teacher": {
            "name": "teacher",
            "publishParams": {
                "allowed": [
                    "video",
                    "screen",
                    "audio"
                ],
                "audio": {
                    "bitRate": 32,
                    "codec": "opus"
                },
                "video": {
                    "bitRate": 250,
                    "codec": "vp8",
                    "frameRate": 30,
                    "width": 480,
                    "height": 270
                },
                "screen": {
                    "codec": "vp8",
                    "frameRate": 10,
                    "width": 1920,
                    "height": 1080
                },
                "videoSimulcastLayers": {},
                "screenSimulcastLayers": {}
            },
            "subscribeParams": {
                "subscribeToRoles": [
                    "guest"
                ],
                "maxSubsBitRate": 3200,
                "subscribeDegradation": {}
            },
            "permissions": {}
        }
    },
    "settings": {
        "subscribeDegradation": {},
        "screenSimulcastLayers": {},
        "videoSimulcastLayers": {}
    }
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Content-type <br/>   | application/json             | Yes      |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

### Body Paramters
| Name                 | Type     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Required |
| :------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------- |
 | name <br/>           | `string` | A unique identifier you can assign to 100ms temmplates. Accepted characters are `a-z, A-Z, 0-9, and . - : _`. If not provided, this is generated automatically. <br/><br/> **Notes**: <br/> (1) If `create Template` is called with an existing room name, then the corresponding template ID is returned <br/> (2) Providing template name will be helpful if you want to update/delete the template using name    | No       |
| default <br/>           | `boolean` | Whether this is default template for a customer. Default template for a customer is used when no template is provided in `create Room` api. | No      |
| roles <br/>           | `object` | Map of `<roleName:roleObject>`. Providing an empty object corresponding to a `roleName` while creating the template first time provides some default values for most of the options.  | No       |

### roleObject
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| publishParams     | `object` | Publish parameters for this role.   | No       |
| subscribeParams | `object`  | Subscribe parameters for this role. | No       |
| permissions | `object`  | Permissions for this role. | No       |
| priority | `int` | Priority for subscription/publishing.| No |

### publishParams
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| allowed     | `object` | Allowed tracks. Subset of [audio, video, screen]. | No       |
| audio | `object`  | Audio publish parameters. | No       |
| video | `object`  | Video publish parameters.     | No |
| screen | `object` | Screenshare publish parameters. | No |
| videoSimulcastLayers | `object`  | Video simulcast parameters (adding this enables video simulcast).      | No |
| screenSimulcastLayers | `object` | Screenshare simulcast parameters (adding this enables screen simulcast). | No |

### audio
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| bitRate     | `int` | Audio Max bitrate of audio track in kbps.<br/> Range: 16-128<br/>Default: 32                                                                                                                      | No       |
| codec | `string`  |  Codec for the audio track<br/>Options: [opus] <br/>Default: opus | No       |

### video
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| bitRate     | `int` | Max bitrate of video track in kbps<br/>Range: 50-2000<br/>Default: 256                                                                                                                       | No       |
| codec | `string`  | Codec for the video track<br/>Options: [vp8]<br/>Default: vp8 | No       |
| FrameRate     | `int` | Max number of video frames per second<br/>Range: 1-30<br/>Default: 25                                                                                                                       | No       |
| height     | `int` | Height of the video track<br/>Range: 90-720<br/>Default: 180                                                                                                                     | No       |
| width     | `int` | Width of the video track<br/>Range: 160-1280<br/>Default: 320                                                        | No       |


### screen
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| bitRate     | `int` | Max bitrate of screen track in kbps<br/>Range: 500-5000<br/>Default: 1024                                                                                                                       | No       |
| codec | `string`  | Codec for the screen track<br/>Options: [vp8]<br/>Default: vp8 | No       |
| frameRate     | `int` | Screen framerate                                                                                                                       | No       |
| height     | `int` | Height of the screen track<br/>Range: 270-1080<br/>Default: 720                                                                                                 | No       |
| width     | `int` | Width of the screen track<br/>Range: 480-1920<br/>Default: 1280                                                                                                                     | No       |



### permissions
| Name        | Type      | Description                                                                                                                                                                                     | Required |
| :---------- | :-------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------- |
| endRoom | `boolean` | Permission to end room for all | No |
| lockRoom | `boolean` | Permission to lock room | No |
| removeOthers | `boolean` | Permission to remove others from the room | No |
| mute | `boolean` | Permission to request others to mute themselves | No |
| muteForce | `boolean` | Permission to request others to mute by force | No |
| unmute | `boolean` | Permission to request others to unmute themselves | No |
| changeRole | `boolean` | Permission to request others to change their role | No |
| changeRoleForce | `boolean` | Permission to change others role forcefully | No |
| rtmp | `boolean` | Permission to start/stop rtmp streaming |  No |
| recording | `boolean` | Permission to start/stop room recording | No |


## Create/Modify Role

This API can be used to modify a role.

<PostRequest
    title="Modify Role API"
    desp="This endpoint is used to modify a role."
    url="https://prod-policy.100ms.live/api/v1/templates/<id>/roles/<roleName>"
/>

<Tabs items={['Request', 'Response']} id="req1" />

<Tab id="req1-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates/<id>/roles/<roleName> -H 'Authorization: Bearer <management_token>' -X POST -H 'Content-Type: application/json' -d '{ "name": "listener3", "publishParams": { "allowed": [ "video", "screen", "audio" ], "audio": { "bitRate": 40, "codec": "opus" }, "video": { "bitRate": 400, "codec": "vp8", "frameRate": 30, "width": 480, "height": 360 }, "screen": { "codec": "vp8", "frameRate": 10, "width": 1920, "height": 1080 }, "videoSimulcastLayers": {}, "screenSimulcastLayers": {} }, "subscribeParams": { "subscribeToRoles": [ "speaker", "moderator", "new-role-9880" ], "maxSubsBitRate": 3200, "subscribeDegradation": {} }, "permissions": {}, "priority": 1 }'
```
</Tab>
<Tab id="req1-1">

<Response res="200: OK" />

```json
{
    "name": "listener3",
    "publishParams": {
        "allowed": [
            "video",
            "screen",
            "audio"
        ],
        "audio": {
            "bitRate": 40,
            "codec": "opus"
        },
        "video": {
            "bitRate": 400,
            "codec": "vp8",
            "frameRate": 30,
            "width": 480,
            "height": 360
        },
        "screen": {
            "codec": "vp8",
            "frameRate": 10,
            "width": 1920,
            "height": 1080
        },
        "videoSimulcastLayers": {},
        "screenSimulcastLayers": {}
    },
    "subscribeParams": {
        "subscribeToRoles": [
            "speaker",
            "moderator",
            "new-role-9880"
        ],
        "maxSubsBitRate": 3200,
        "subscribeDegradation": {}
    },
    "permissions": {},
    "priority": 1
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Content-type <br/>   | application/json             | Yes      |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

### Body Paramters
| Name                 | Type     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Required |
| :------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------- |
| roleObject <br/>           | `object` | Role Object correspoding to the given role. | Yes       |
| name <br/> | `string` | Providing a `name` renames the role to the provided name. | No |


## Update Settings

This API can be used to update settings.

<PostRequest
    title="Update Settings API"
    desp="This endpoint is used to update settings. "
    url="https://prod-policy.100ms.live/api/v1/templates/<id>/setings>"
/>

<Tabs items={['Request', 'Response']} id="req2" />

<Tab id="req2-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates/<id>/settings -H 'Authorization: Bearer <management_token>' -X POST -H 'Content-Type: application/json' -d '{ "region": "in" }'
```
</Tab>
<Tab id="req2-1">

<Response res="200: OK" />

```json
{
    "region": "in"
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Content-type <br/>   | application/json             | Yes      |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

### Body Paramters
| Name                 | Type     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Required |
| :------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------- |
| region <br/>           | `string` | Region | No       |

## Get Template

This API can be used to fetch a template. Instead of templateId, templateName can be provided with `?name=templateName` to fetch by name. Providing no URL params fetches all templates for the customer.

<GetRequest
    title="Get Template API"
    desp="This endpoint is used to fetch a template. "
    url="https://prod-policy.100ms.live/api/v1/templates?id=<templateID>"
/>

<Tabs items={['Request', 'Response']} id="req3" />

<Tab id="req3-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates?id=<templateId> -H 'Authorization: Bearer <management_token>'
```
</Tab>
<Tab id="req3-1">

<Response res="200: OK" />

```json
{
    "limit": 10,
    "data": [
        {
            "_id": "615dbca1ba65e77a89a8e2b8",
            "name": "test-amit10",
            "customer": "60f7cc95f88117b9e47bf618",
            "roles": {
                "student": {
                    "name": "student",
                    "publishParams": {
                        "allowed": [
                            "screen",
                            "audio"
                        ],
                        "audio": {
                            "bitRate": 42,
                            "codec": "opus"
                        },
                        "video": {
                            "bitRate": 250,
                            "codec": "vp8",
                            "frameRate": 30,
                            "width": 480,
                            "height": 270
                        },
                        "screen": {
                            "codec": "vp8",
                            "frameRate": 10,
                            "width": 1920,
                            "height": 1086
                        },
                        "videoSimulcastLayers": {},
                        "screenSimulcastLayers": {}
                    },
                    "subscribeParams": {
                        "subscribeToRoles": [
                            "teacher",
                            "student"
                        ],
                        "maxSubsBitRate": 2000,
                        "subscribeDegradation": {}
                    },
                    "permissions": {},
                    "priority": 1
                }
            },
            "settings": {
                "region": "in",
                "subscribeDegradation": {},
                "screenSimulcastLayers": {},
                "videoSimulcastLayers": {}
            }
        }
    ],
    "last": "615dbca1ba65e77a89a8e2b8"
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

## Get Role

This API can be used to fetch a role.

<GetRequest
    title="Get Role API"
    desp="This endpoint is used to fetch a role. "
    url="https://prod-policy.100ms.live/api/v1/templates/<templateId>/roles/<roleName>"
/>

<Tabs items={['Request', 'Response']} id="req4" />

<Tab id="req4-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates/<templateId>/roles/<roleName> -H 'Authorization: Bearer <management_token>'
```
</Tab>
<Tab id="req4-1">

<Response res="200: OK" />

```json
{
    "name": "student",
    "publishParams": {
        "allowed": [
            "screen",
            "audio"
        ],
        "audio": {
            "bitRate": 42,
            "codec": "opus"
        },
        "video": {
            "bitRate": 250,
            "codec": "vp8",
            "frameRate": 30,
            "width": 480,
            "height": 270
        },
        "screen": {
            "codec": "vp8",
            "frameRate": 10,
            "width": 1920,
            "height": 1086
        },
        "videoSimulcastLayers": {},
        "screenSimulcastLayers": {}
    },
    "subscribeParams": {
        "subscribeToRoles": [
            "teacher",
            "student"
        ],
        "maxSubsBitRate": 2000,
        "subscribeDegradation": {}
    },
    "permissions": {},
    "priority": 1
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |


## Get Settings

This API can be used to fetch settings.

<GetRequest
    title="Get Settings API"
    desp="This endpoint is used to fetch settings. "
    url="https://prod-policy.100ms.live/api/v1/templates/<templateId>/settings"
/>

<Tabs items={['Request', 'Response']} id="req5" />

<Tab id="req5-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates/<templateId>/settings -H 'Authorization: Bearer <management_token>'
```
</Tab>
<Tab id="req5-1">

<Response res="200: OK" />

```json
{
    "region": "in",
    "subscribeDegradation": {},
    "screenSimulcastLayers": {},
    "videoSimulcastLayers": {}
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |


## Modify Template

This API can be used to modify a template. This can be used to rename a template, toggle the default field and/or modify roles/settings if whole object can be provided. You can also use the URL paramater name with `?name=<templateName>` instead of id to modify a temlate. Providing same name as a previous template overrides that template.

<PostRequest
    title="Modify Template API"
    desp="This endpoint is used to modify a Template. "
    url="https://prod-policy.100ms.live/api/v1/templates?id=<templateId>"
/>

<Tabs items={['Request', 'Response']} id="req6" />

<Tab id="req6-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates?id=<templateId> -H 'Authorization: Bearer <management_token>' -X POST -H 'Content-Type: application/json' -d '{ "roles":{ "student":{ "name":"student", "publishParams":{ "allowed":[ "screen", "audio" ], "audio":{ "bitRate":42, "codec":"opus" }, "video":{ "bitRate":250, "codec":"vp8", "frameRate":30, "width":480, "height":270 }, "screen":{ "codec":"vp8", "frameRate":10, "width":1920, "height":1086 } }, "subscribeParams":{ "subscribeToRoles":[ "teacher", "student" ], "maxSubsBitRate":2000 }, "priority":1 } }, "settings":{ "region":"eu" } }'
```
</Tab>
<Tab id="req6-1">

<Response res="200: OK" />

```json
{
    "_id": "615dbca1ba65e77a89a8e2b8",
    "name": "test-amit10",
    "customer": "60f7cc95f88117b9e47bf618",
    "roles": {
        "student": {
            "name": "student",
            "publishParams": {
                "allowed": [
                    "screen",
                    "audio"
                ],
                "audio": {
                    "bitRate": 42,
                    "codec": "opus"
                },
                "video": {
                    "bitRate": 250,
                    "codec": "vp8",
                    "frameRate": 30,
                    "width": 480,
                    "height": 270
                },
                "screen": {
                    "codec": "vp8",
                    "frameRate": 10,
                    "width": 1920,
                    "height": 1086
                },
                "videoSimulcastLayers": {},
                "screenSimulcastLayers": {}
            },
            "subscribeParams": {
                "subscribeToRoles": [
                    "teacher",
                    "student"
                ],
                "maxSubsBitRate": 2000,
                "subscribeDegradation": {}
            },
            "permissions": {},
            "priority": 1
        }
    },
    "settings": {
        "region": "eu",
        "subscribeDegradation": {},
        "screenSimulcastLayers": {},
        "videoSimulcastLayers": {}
    }
}
```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Content-type <br/>   | application/json             | Yes      |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

### Body Paramters
| Name                 | Type     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Required |
| :------------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------- |
| name <br/>           | `string` | If you don't provide the `name`, earlier templateNmae is used. Providing name of another template overrides it.  | No       |
| default <br/>           | `boolean` | Whether this is default template for customer. Default template for a customer is used when no template is provided in create room api. | No      |
| roles <br/>           | `object` | Modified map of `<roleName:roleObject>`. Since this a POST request, you need to provide the whole roles object to modify/persist/override it.  | Yes       |




## Delete Role

This API can be used to delete a role. Subsequent delete requests on non-existing roles gives 404.

<DeleteRequest
    title="Delete Role API"
    desp="This endpoint is used to delete a role. "
    url="https://prod-policy.100ms.live/api/v1/templates/<id>/roles/<roleName>"
/>

<Tabs items={['Request', 'Response']} id="req7" />

<Tab id="req7-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates/<id>/roles/<roleName> -H 'Authorization: Bearer <management_token>' -X DELETE -H 'Content-Type: application/json'
```
</Tab>
<Tab id="req7-1">

<Response res="204: No Content" />

```json

```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |

## Delete Template

This API can be used to delete a template. Instead of an id URL parameter `name` can be provided with `?name=templateName`. Subsequent delete requests on non-existing templates gives 404.

<DeleteRequest
    title="Delete Template API"
    desp="This endpoint is used to delete a template. "
    url="https://prod-policy.100ms.live/api/v1/templates?id=<templateID"
/>

<Tabs items={['Request', 'Response']} id="req8" />

<Tab id="req8-0">

```bash
curl https://prod-policy.100ms.live/api/v1/templates?id=<id> -H 'Authorization: Bearer <management_token>' -X DELETE -H 'Content-Type: application/json'
```
</Tab>
<Tab id="req8-1">

<Response res="204: No Content" />

```json

```
</Tab>

### Headers
| Name                 | Value                        | Required |
| :------------------- | :--------------------------- | :------- |
| Authorization <br/>  | Bearer `<management token>`  | Yes      |





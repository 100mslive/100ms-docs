---
title: 100ms SDK Flutter Quickstart Guide
nav: 2.0
---

## Overview

This guide will walk you through simple instructions to create a video conferencing app using 100ms Flutter SDK and test it using an emulator or your mobile phone.

Please check our [basic concepts guide](./../foundation/basics) to understand the concepts like rooms, templates, peers, etc.

## Create a sample app

This section contains instructions to create a simple Flutter video conferencing app in under 10 minutes. We will help you with instructions to understand the project setup and complete code samples to implement this quickly.

Follow the instructions in one of the tabs below based on the target platform you wish to create the sample app.

<Tabs id="sample-app" items={['Android', 'iOS']} />

<Tab id="sample-app-0">

### Prerequisites

To complete this implementation for Android platform, you must have:

-   An [100ms account](https://dashboard.100ms.live/register) if you don't have one already.
-   [Flutter](https://docs.flutter.dev/get-started/install) `3.3.0` or higher
-   Dart `2.12.0` or above
-   [VS code](https://code.visualstudio.com/) or [Android Studio](https://developer.android.com/studio) or any other IDE that supports Flutter. For more information on setting up an IDE, check [Flutter's official guide](https://docs.flutter.dev/get-started/editor).

### Create a Flutter app

Once you have the above prerequisites, you can follow the below steps to create a Flutter app either using terminal or using Android Studio:

-   If you wish to create a Flutter app using terminal, you can get the [Flutter SDK](https://docs.flutter.dev/get-started/install/macos#get-sdk) and use the below command:

    ```bash
    flutter create my_app
    ```

-   If you are using Android Studio, you can create a Flutter project from the welcome screen by clicking on `New Flutter Project` and from the menu bar, File > New > New Flutter Project.
-   Verify the `Flutter SDK path` specifies the SDK's location (select Install SDKâ€¦ if the text field is blank).
-   Enter a project name (for example, myapp). Then click Next.
-   Click Finish and wait till Android Studio creates the project.
    <br />
    <video loop="true" autoplay="autoplay" controls="controls" id="vid" muted>
        <source src="/docs/guides/create-flutter-app.mp4" type="video/mp4" />
    </video>
    <br />

### Add 100ms SDK to your project

Once you have created a Flutter app, you must add the 100ms Flutter SDK and permissions_handler (to handle device media permissions) to your app.

```yaml
# 100ms SDK and permissions_handler
hmssdk_flutter:
permission_handler:
```

-   You can add the above snippet to the `pubspec.yaml` from Terminal using some terminal editor like Vim or Nano.
-   Run `flutter pub get` to download these dependencies to your app.
-   In Android Studio, you can update the `pubspec.yaml` and click `Pub get` to download these dependencies to your app.

    <br />
    <video loop="true" autoplay="autoplay" controls="controls" id="vid" muted>
        <source src="/docs/guides/add-hms-sdk.mp4" type="video/mp4" />
    </video>
    <br />

### Complete code example

Now that your project setup is complete, let's replace the code in the `lib/main.dart` file with the complete code sample below.

```dart
import 'dart:developer';
import 'dart:io';

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:hmssdk_flutter/hmssdk_flutter.dart';
import 'package:permission_handler/permission_handler.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(title: '100ms Integration Guide'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({super.key, required this.title});
  final String title;

  @override
  State<MyHomePage> createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  bool res = false;

  static Future<bool> getPermissions() async {
    if (Platform.isIOS) return true;
    await Permission.camera.request();
    await Permission.microphone.request();
    await Permission.bluetoothConnect.request();

    while ((await Permission.camera.isDenied)) {
      await Permission.camera.request();
    }
    while ((await Permission.microphone.isDenied)) {
      await Permission.microphone.request();
    }
    while ((await Permission.bluetoothConnect.isDenied)) {
      await Permission.bluetoothConnect.request();
    }
    return true;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: Container(
        color: Colors.black,
        child: Center(
          child: ElevatedButton(
            style: ButtonStyle(
                shape: MaterialStateProperty.all<RoundedRectangleBorder>(
                    RoundedRectangleBorder(
                      borderRadius: BorderRadius.circular(8.0),
                    ))),
            onPressed: () async => {
              res = await getPermissions(),
              if (res)
                Navigator.push(context,
                    CupertinoPageRoute(builder: (_) => const MeetingPage()))
            },
            child: const Padding(
              padding: EdgeInsets.symmetric(vertical: 20, horizontal: 20),
              child: Text(
                'Join',
                style: TextStyle(fontSize: 20),
              ),
            ),
          ),
        ),
      ),
    );
  }
}

class MeetingPage extends StatefulWidget {
  const MeetingPage({super.key});

  @override
  State<MeetingPage> createState() => _MeetingPageState();
}

class _MeetingPageState extends State<MeetingPage>
    implements HMSUpdateListener {
  late HMSSDK hmsSDK;
  String userName = "test_user";

  // Web Meeting Room Link: https://yogi-live.app.100ms.live/streaming/meeting/qii-tow-sjq
  String authToken =
      "<YOUR_APP_TOKEN_FROM_DASHBOARD>";
  Offset position = const Offset(5, 5);
  bool isJoinSuccessful = false;
  HMSPeer? localPeer, remotePeer;
  HMSVideoTrack? localPeerVideoTrack, remotePeerVideoTrack;
  @override
  void initState() {
    super.initState();
    hmsSDK = HMSSDK();
    hmsSDK.build();
    hmsSDK.addUpdateListener(listener: this);
    hmsSDK.join(config: HMSConfig(authToken: authToken, userName: userName));
  }

  @override
  void dispose() {
    remotePeer = null;
    remotePeerVideoTrack = null;
    localPeer = null;
    localPeerVideoTrack = null;
    super.dispose();
  }

  @override
  void onJoin({required HMSRoom room}) {
    room.peers?.forEach((peer) {
      if (peer.isLocal) {
        localPeer = peer;
        if (peer.videoTrack != null) {
          localPeerVideoTrack = peer.videoTrack;
        }
        if (mounted) {
          WidgetsBinding.instance.addPostFrameCallback((_) {
            setState(() {});
          });
        }
      }
    });
  }

  @override
  void onPeerUpdate({required HMSPeer peer, required HMSPeerUpdate update}) {
    if (update == HMSPeerUpdate.networkQualityUpdated) {
      return;
    }
    if (update == HMSPeerUpdate.peerJoined) {
      if (!peer.isLocal) {
        if (mounted) {
          WidgetsBinding.instance.addPostFrameCallback((_) {
            setState(() {
              remotePeer = peer;
            });
          });
        }
      }
    } else if (update == HMSPeerUpdate.peerLeft) {
      if (!peer.isLocal) {
        if(mounted){
          setState(() {
            remotePeer = null;
          });
        }

      } else {
        if(mounted) {
          setState(() {
            localPeer = null;
          });
        }
      }
    }
  }

  @override
  void onTrackUpdate(
      {required HMSTrack track,
        required HMSTrackUpdate trackUpdate,
        required HMSPeer peer}) {
    if (track.kind == HMSTrackKind.kHMSTrackKindVideo) {
      if (trackUpdate == HMSTrackUpdate.trackRemoved) {
        if (peer.isLocal) {
          if(mounted) {
            setState(() {
              localPeerVideoTrack = null;
            });
          }
        } else {
          if(mounted) {
            setState(() {
              remotePeerVideoTrack = null;
            });
          }
        }
        return;
      }
      if (peer.isLocal) {
        if (mounted) {
          setState(() {
            localPeerVideoTrack = track as HMSVideoTrack;
          });
        }
      } else {
        if (mounted) {
          setState(() {
            remotePeerVideoTrack = track as HMSVideoTrack;
          });
        }
      }
    }
  }

  @override
  void onAudioDeviceChanged(
      {HMSAudioDevice? currentAudioDevice,
        List<HMSAudioDevice>? availableAudioDevice}) {}

  @override
  void onChangeTrackStateRequest(
      {required HMSTrackChangeRequest hmsTrackChangeRequest}) {}

  @override
  void onHMSError({required HMSException error}) {}

  @override
  void onMessage({required HMSMessage message}) {}

  @override
  void onReconnected() {}

  @override
  void onReconnecting() {}

  @override
  void onRemovedFromRoom(
      {required HMSPeerRemovedFromPeer hmsPeerRemovedFromPeer}) {}

  @override
  void onRoleChangeRequest({required HMSRoleChangeRequest roleChangeRequest}) {}

  @override
  void onRoomUpdate({required HMSRoom room, required HMSRoomUpdate update}) {}

  @override
  void onUpdateSpeakers({required List<HMSSpeaker> updateSpeakers}) {}

  @override
  Widget build(BuildContext context) {
    return WillPopScope(
      onWillPop: () async {
        hmsSDK.leave();
        Navigator.pop(context);
        return true;
      },
      child: SafeArea(
          child: Scaffold(
            body: Stack(
              children: [
                Container(
                    color: Colors.black,
                    height: MediaQuery.of(context).size.height,
                    child: GridView(
                      gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                          mainAxisExtent: (remotePeerVideoTrack == null)?MediaQuery.of(context).size.height:MediaQuery.of(context).size.height/2,
                          crossAxisCount: 1),
                      children: [
                        if (remotePeerVideoTrack != null && remotePeer != null)
                          peerTile(Key(remotePeerVideoTrack?.trackId??"" "mainVideo"),remotePeerVideoTrack, remotePeer, context),
                        peerTile(Key(localPeerVideoTrack?.trackId??"" "mainVideo"),localPeerVideoTrack, localPeer, context)
                      ],
                    )),
                Align(
                  alignment: Alignment.bottomCenter,
                  child: Container(
                    color: Colors.black,
                    child: Padding(
                      padding: const EdgeInsets.symmetric(vertical:8.0),
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: [
                          GestureDetector(
                            onTap: () async {
                              hmsSDK.leave();
                              Navigator.pop(context);
                            },
                            child: Container(
                              decoration: BoxDecoration(
                                  shape: BoxShape.circle,
                                  boxShadow: [
                                    BoxShadow(
                                      color: Colors.red.withAlpha(60),
                                      blurRadius: 3.0,
                                      spreadRadius: 5.0,
                                    ),
                                  ]),
                              child: const CircleAvatar(
                                radius: 25,
                                backgroundColor: Colors.red,
                                child: Icon(Icons.call_end, color: Colors.white),
                              ),
                            ),
                          ),
                        ],
                      ),
                    ),
                  ),
                ),
              ],
            ),
          )),
    );
  }

  Widget peerTile(Key key,
      HMSVideoTrack? videoTrack, HMSPeer? peer, BuildContext context) {
    return Container(
      key: key,
      color: Colors.black,
      child: (videoTrack != null && !(videoTrack.isMute))
          ? HMSVideoView(
        track: videoTrack,
      )
          : Center(
        child: Container(
          decoration: BoxDecoration(
            color: Colors.blue.withAlpha(4),
            shape: BoxShape.circle,
            boxShadow: const [
              BoxShadow(
                color: Colors.blue,
                blurRadius: 20.0,
                spreadRadius: 5.0,
              ),
            ],
          ),
          child: Text(
            peer?.name.substring(0, 1) ?? "D",
            style: const TextStyle(
                color: Colors.white,
                fontSize: 24,
                fontWeight: FontWeight.w600),
          ),
        ),
      ),
    );
  }
}
```

</Tab>

<Tab id="sample-app-1">

### Prerequisites

To complete this implementation for Android platform, you must have:

-   An [100ms account](https://dashboard.100ms.live/register) if you don't have one already.
-   [Flutter](https://docs.flutter.dev/get-started/install) `3.3.0` or higher
-   Dart `2.12.0` or above
-   [VS code](https://code.visualstudio.com/) or [Android Studio](https://developer.android.com/studio) or any other IDE that supports Flutter. For more information on setting up an IDE, check [Flutter's official guide](https://docs.flutter.dev/get-started/editor).

### Create a Flutter app

Once you have the above prerequisites, you can follow the below steps to create a Flutter app either using terminal or using Android Studio:

-   If you wish to create a Flutter app using terminal, you can get the [Flutter SDK](https://docs.flutter.dev/get-started/install/macos#get-sdk) and use the below command:

    ```bash
    flutter create my_app
    ```

-   If you are using Android Studio, you can create a Flutter project from the welcome screen by clicking on `New Flutter Project` and from the menu bar, File > New > New Flutter Project.
-   Verify the `Flutter SDK path` specifies the SDK's location (select Install SDKâ€¦ if the text field is blank).
-   Enter a project name (for example, myapp). Then click Next.
-   Click Finish and wait till Android Studio creates the project.
    <br />
    <video loop="true" autoplay="autoplay" controls="controls" id="vid" muted>
        <source src="/docs/guides/create-flutter-app.mp4" type="video/mp4" />
    </video>
    <br />

### Add 100ms SDK to your project

Once you have created a Flutter app, you must add the 100ms Flutter SDK and permissions_handler (to handle device media permissions) to your app.

```yaml
# 100ms SDK and permissions_handler
hmssdk_flutter:
permission_handler:
```

-   You can add the above snippet to the `pubspec.yaml` from Terminal using some terminal editor like Vim or Nano.
-   Run `flutter pub get` to download these dependencies to your app.
-   In Android Studio, you can update the `pubspec.yaml` and click `Pub get` to download these dependencies to your app.

    <br />
    <video loop="true" autoplay="autoplay" controls="controls" id="vid" muted>
        <source src="/docs/guides/add-hms-sdk.mp4" type="video/mp4" />
    </video>
    <br />

### Complete code example

</Tab>

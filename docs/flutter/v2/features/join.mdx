---
title: Join Room
nav: 3.02
---

## Overview

To join and interact with others in audio or video call, the user needs to join a `room`.

When user indicates that they want to _join_ the room, your app should have -

1. User Name - The name which should be displayed to other peers in the room.
2. [Authentication Token](../guides/token) - The Client side Authentication Token generated by the Token Service.

You can also optionally pass these fields -

1. Settings - Such as to join room with Muted Audio or Video using the `HMSTrackSetting` object.
2. User Metadata - This can be used to pass any additional metadata associated with the user using `metadata` of `HMSConfig` object.


## Join a Room


We'll call the `join` method on `HMSSDK` object with a config containing above fields to join the room.

1. First, create an instance of `HMSSDK` using the `build` function. You'll need a class which implements `HMSUpdateListener` interface. The methods of `HMSUpdateListener` are invoked to notify updates happening in the room like a peer joins/leaves, a track got muted/unmuted, etc.

```dart 
HMSSDK hmsSDK = HMSSDK();
hmsSDK.build();
hmsSDK.addUpdateListener(this);
```

2. Next, create an object of `HMSConfig` class using the available joining configurations.

```dart
HMSConfig config = HMSConfig(authToken: 'eyJH5c', // client-side token generated from your token service 
                              userName: 'John Appleseed');
```

3. Now, we are primed to join the room. All you have to do is calling `join` by passing the `config` object.
```dart
hmsSDK.join(config: config);
```


That's it. You have joined a room successfully ü•≥


## Join with Muted Audio / Video


Joining with Muted Audio / Video is a customization that sets the microphone and camera state before joining the room.

By default `HMSSDK` keeps the microphone and camera ON but by using this feature you can decide their state according to your use case.

This can be achieved using the `hmsVideoTrackInitState` property for Video and `hmsAudioTrackInitState` for Audio in the `hmsTrackSetting`
of the `HMSSDK` constructor.

Here `trackInitialState` property of `HMSVideoTrackSetting` and `HMSAudioTrackSetting` is an Enum of type `HMSTrackInitState` which has the possible values as:

```dart
enum HMSTrackInitState {

  //If the track needs to be kept mute while joining
   MUTED,

  //If the track needs to be kept unmute while joining
   UNMUTED,
}
```

Let's see how this can be achieved in the following steps.

1. First, for joining a room with muted audio/video, these values need to be set in the `hmsTrackSetting` property as -

```dart
HMSTrackSetting trackSettings = HMSTrackSetting(
        // This is for joining with muted audio and muted video
         audioTrackSetting: HMSAudioTrackSetting(trackInitialState: HMSTrackInitState.MUTED),
         videoTrackSetting: HMSVideoTrackSetting(trackInitialState: HMSTrackInitState.MUTED));
```


2. Now, create the `HMSSDK` object by pass the `HMSTrackSetting` object created above :

```dart 
// pass the trackSettings while constructing the HMSSDK instance
HMSSDK hmsSDK = HMSSDK(hmsTrackSetting: trackSettings);

// perform the build operation
hmsSDK.build();

// attach the updateListener object implementing the HMSUpdateListener class
hmsSDK.addUpdateListener(updateListener);
```

2. Next, create an object of `HMSConfig` class using the available joining configurations.

```dart
HMSConfig config = HMSConfig(authToken: 'eyJH5c', // client-side token generated from your token service 
                              userName: 'John Appleseed');
```

3. Now, we are primed to join the room. All you have to do is calling `join` by passing the `config` object.
```dart
hmsSDK.join(config);
```


Now, the user joins the room with the microphone and the camera turned off.

## Implementation
 
Below sample code will you in understanding the implementation of `HMSUpdateListener` in class.

```dart
class Meeting implements HMSUpdateListener{

    late HMSSDK hmsSDK;

    Meeting(){
        hmsSDK = HMSSDK();
        hmsSDK.build();
        hmsSDK.addUpdateListener(this);
        HMSConfig config = HMSConfig(authToken: 'eyJH5c', // client-side token generated from your token service 
                                userName: 'John Appleseed');
        hmsSDK.join(config: config);
    }
    @override
    void onJoin({required HMSRoom room}) async {
       // User Join successfully.
    }
    ...
}
```

## Update Listener

The methods of `HMSUpdateListener` are invoked to notify updates happening in the room like a peer joins/leaves, a track got muted/unmutes, etc.

After calling `join` your app will be provided an update from the 100ms SDK.


‚úÖ If successful, the `onJoin({required HMSRoom room})` method of `HMSUpdateListener` will be invoked with information about the room encapsulated in the `HMSRoom` object.

‚ùå If failure, the `onHMSError({required HMSException error})` method will be invoked with exact failure reason.

Depending on your use case, you'll need to implement specific methods of the Update Listener. The most common ones are onJoin, onPeerUpdate, onTrackUpdate & onHMSError.


Implement this listener in a class where you want to perform UI Actions, update App State, etc. These updates can be used to render the video on screen or to display other info regarding the room.



```dart
/// 100ms SDK provides callbacks to the client app about any change or update happening in the room after a user has joined by implementing HMSUpdateListener.
/// Implement this listener in a class where you want to perform UI Actions, update App State, etc. These updates can be used to render the video on screen or to display other info regarding the room.
/// Depending on your use case, you'll need to implement specific methods of the Update Listener. The most common ones are onJoin, onPeerUpdate, onTrackUpdate & onHMSError.
abstract class HMSUpdateListener {
  /// This will be called on a successful JOIN of the room by the user
  ///
  /// This is the point where applications can stop showing its loading state
  /// - Parameter room: the room which was joined
  void onJoin({required HMSRoom room});

  /// This will be called whenever there is an update on an existing peer
  /// or a new peer got added/existing peer is removed.
  ///
  /// This callback can be used to keep a track of all the peers in the room
  /// - Parameters:
  ///   - peer: the peer who joined/left or was updated
  ///   - update: the triggered update type. Should be used to perform different UI Actions
  void onPeerUpdate({required HMSPeer peer, required HMSPeerUpdate update});

  /// This is called when there are updates on an existing track
  /// or a new track got added/existing track is removed
  ///
  /// This callback can be used to render the video on screen whenever a track gets added
  /// - Parameters:
  ///   - track: the track which was added, removed or updated
  ///   - trackUpdate: the triggered update type
  ///   - peer: the peer for which track was added, removed or updated
  void onTrackUpdate(
      {required HMSTrack track,
      required HMSTrackUpdate trackUpdate,
      required HMSPeer peer});

  /// This will be called when there is an error in the system
  ///
  /// and SDK has already retried to fix the error
  /// - Parameter error: the error that occurred
  void onHMSError({required HMSException error});

  /// This is called when there is a change in any property of the Room
  ///
  /// - Parameters:
  ///   - room: the room which was joined
  ///   - update: the triggered update type. Should be used to perform different UI Actions
  void onRoomUpdate({required HMSRoom room, required HMSRoomUpdate update});

  /// This is called when there is a new broadcast message from any other peer in the room
  ///
  /// This can be used to implement chat is the room
  /// - Parameter message: the received broadcast message
  void onMessage({required HMSMessage message});

  /// This is called every 1 second with list of active speakers
  ///
  /// ## A HMSSpeaker object contains -
  ///    - peerId: the peer identifier of HMSPeer who is speaking
  ///    - trackId: the track identifier of HMSTrack which is emitting audio
  ///    - audioLevel: a number within range 1-100 indicating the audio volume
  ///
  /// A peer who is not present in the list indicates that the peer is not speaking
  ///
  /// This can be used to highlight currently speaking peers in the room
  /// - Parameter speakers: the list of speakers
  void onUpdateSpeakers({required List<HMSSpeaker> updateSpeakers});

  /// When network connection is lost & the SDK is trying to reconnect to the room
  void onReconnecting();

  /// When you are back in the room after network connection was lost
  void onReconnected();

  /// This is called when someone asks for change or role
  ///
  /// for eg. admin can ask a peer to become host from guest.
  /// this triggers this call on peer's app
  void onRoleChangeRequest({required HMSRoleChangeRequest roleChangeRequest});

  /// When someone requests for track change of your Audio, Video or an Auxiliary track like Screenshare, this event will be triggered
  /// - Parameter hmsTrackChangeRequest: request instance consisting of all the required info about track change
  void onChangeTrackStateRequest(
      {required HMSTrackChangeRequest hmsTrackChangeRequest});

  /// When someone kicks you out or when someone ends the room at that time it is triggered
  /// - Parameter hmsPeerRemovedFromPeer - it consists info about who removed you and why.
  void onRemovedFromRoom(
      {required HMSPeerRemovedFromPeer hmsPeerRemovedFromPeer});

  /// Whenever a new audio device is plugged in or audio output is changed we get the onAudioDeviceChanged update
  /// This callback is only fired on Android devices. On iOS, this callback will not be triggered.
  /// - Parameters:
  ///   - currentAudioDevice: Current audio output route
  ///   - availableAudioDevice: List of available audio output devices
  void onAudioDeviceChanged(
      {HMSAudioDevice? currentAudioDevice,
      List<HMSAudioDevice>? availableAudioDevice});
}
```
